<!doctype html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.79.0" />
<link rel="apple-touch-icon" sizes="180x180" href='https://wiki.phala.network/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='https://wiki.phala.network/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='https://wiki.phala.network/favicons/favicon-16x16.png'>
<link rel="manifest" href='https://wiki.phala.network/favicons/site.webmanifest'>
<link rel="mask-icon" href='https://wiki.phala.network/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='https://wiki.phala.network/favicons/favicon.ico'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-config" content='https://wiki.phala.network/favicons/browserconfig.xml'>
<meta name="theme-color" content="#ffffff">

<title>1.1 Hardware Requirement and Configuration | Phala Network Wiki</title><meta property="og:title" content="1.1 Hardware Requirement and Configuration" />
<meta property="og:description" content="Phala Network operates on trusted hardwares, in this case, Intel CPUs which support SGX feature. SGX was first introduced in 2015 with the sixth generation Intel Core microprocessors based on the Skylake microarchitecture. In practice, the support of SGX feature also relies on your motherboard and BIOS configurations. In this section, we will first ensure that necessary hardware requirements are satisfied and all your hardwares are correcly configured.
General Hardware Requirements CPU Requirement You can refer to the following tutorial to ensure that your CPU is SGX-supported." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wiki.phala.network/en-us/docs/poc3/1-1-hardware-configuration/" />
<meta property="og:site_name" content="Phala Network Wiki" />
<meta itemprop="name" content="1.1 Hardware Requirement and Configuration">
<meta itemprop="description" content="Phala Network operates on trusted hardwares, in this case, Intel CPUs which support SGX feature. SGX was first introduced in 2015 with the sixth generation Intel Core microprocessors based on the Skylake microarchitecture. In practice, the support of SGX feature also relies on your motherboard and BIOS configurations. In this section, we will first ensure that necessary hardware requirements are satisfied and all your hardwares are correcly configured.
General Hardware Requirements CPU Requirement You can refer to the following tutorial to ensure that your CPU is SGX-supported.">

<meta itemprop="wordCount" content="1596">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="1.1 Hardware Requirement and Configuration"/>
<meta name="twitter:description" content="Phala Network operates on trusted hardwares, in this case, Intel CPUs which support SGX feature. SGX was first introduced in 2015 with the sixth generation Intel Core microprocessors based on the Skylake microarchitecture. In practice, the support of SGX feature also relies on your motherboard and BIOS configurations. In this section, we will first ensure that necessary hardware requirements are satisfied and all your hardwares are correcly configured.
General Hardware Requirements CPU Requirement You can refer to the following tutorial to ensure that your CPU is SGX-supported."/>


<link rel="stylesheet" href="https://wiki.phala.network/css/styles.00cd19bd8df4b2646453fa51727f45ea777b6a03a021e895ccfce9e41b950e6cf4ebd3e3aa342d35fe46b447bdf07690468037904fb5de0b4e2c08a01a9c83e5.css" integrity="sha512-AM0ZvY30smRkU/pRcn9F6nd7agOgIeiVzPzp5BuVDmz069PjqjQtNf5GtEe98HaQRoA3kE&#43;13gtOLAigGpyD5Q==">


  
  
    
    
    
    
  
    
    
    
    
  
  
  <link href="//fonts.googleapis.com/css?family=Recursive:300,400,500,600|Lato:300,400,500,600" rel="stylesheet">

</head>
<body class="page-page">
  <header class="nav_header"><nav class="wrap nav">
	<a href="https://wiki.phala.network" class="nav_brand">
		<picture>
			
			<img srcset = 'https://wiki.phala.network/images/logo-phala-48.png' alt = 'Phala Network Wiki Logo'>
		</picture>
		<label class="nav_toggle">Menu</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder="" id="find" autocomplete="off">
  <div class="search_results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/en-us/docs/"><span>Docs</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/zh-cn/"><span>中文站</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://phala.network"><span>Homepage</span></a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link" href="https://github.com/Phala-Network/phala-wiki/" target="_blank">GitHub</a>
		</li>
		<li class="nav-item"><div class = 'color_mode'>
  <label for = 'mode'></label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <main class="main wrap pt-4"><div class="grid-auto">
  <div><aside class="aside">
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/" class="group">Overview</a></h2>
      <section class="subsection" id="docs-overview">
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/developer/" class="group">Contract Development Tutorial</a></h2>
      <section class="subsection" id="docs-contract-development-tutorial">
        <h3 class="section_link"><a id="docs-11-run-a-local-development-network" href="https://wiki.phala.network/en-us/docs/developer/run-a-local-development-network/">1.1 Run a Local Development Network</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment">Environment</a></li>
    <li><a href="#build-the-core-blockchain">Build the core blockchain</a></li>
    <li><a href="#build-the-web-ui">Build the Web UI</a></li>
    <li><a href="#send-some-secret-tokens">Send some secret tokens</a></li>
    <li><a href="#conclusion">Conclusion</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-12-hello-world-your-first-confidential-contract" href="https://wiki.phala.network/en-us/docs/developer/your-first-confidential-contract/">1.2 Hello World: your first confidential contract</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment-and-build">Environment and Build</a></li>
    <li><a href="#walk-through">Walk-through</a>
      <ul>
        <li><a href="#contract">Contract</a></li>
        <li><a href="#frontend">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#implement-a-secret-notebook">Implement a secret notebook</a>
      <ul>
        <li><a href="#contract-1">Contract</a></li>
        <li><a href="#frontend-1">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#put-everything-together">Put everything together</a></li>
    <li><a href="#summary">Summary</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-13-troubleshooting" href="https://wiki.phala.network/en-us/docs/developer/troubleshooting/">1.3 Troubleshooting</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#phala-blockchain"><code>phala-blockchain</code></a>
      <ul>
        <li><a href="#probelm-consider-giving-accuracy-a-type-when-building-substrate">Probelm: &quot;consider giving <code>accuracy</code> a type&quot; when building substrate</a></li>
        <li><a href="#probelm-duplicate-lang-item">Probelm: &quot;duplicate lang item&quot;</a></li>
      </ul>
    </li>
    <li><a href="#apps-ng-related"><code>apps-ng</code> related</a>
      <ul>
        <li><a href="#probelm-polkadotdevconfigtsconfig-not-found">Probelm: '@polkadot/dev/config/tsconfig' not found</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/gatekeeper/" class="group">GateKeeper Guide</a></h2>
      <section class="subsection" id="docs-gatekeeper-guide">
        <h3 class="section_link"><a id="docs-run-a-gatekeeper" href="https://wiki.phala.network/en-us/docs/gatekeeper/run-a-gatekeeper/">Run a Gatekeeper</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#setup-environment">Setup Environment</a></li>
    <li><a href="#synchronize-chain-data">Synchronize Chain Data</a>
      <ul>
        <li><a href="#to-compile-your-gatekeeper-node">*To Compile Your Gatekeeper Node</a></li>
      </ul>
    </li>
    <li><a href="#bond-pha">Bond PHA</a></li>
    <li><a href="#set-session-keys">Set Session Keys</a>
      <ul>
        <li><a href="#generating-the-session-keys">Generating the Session Keys</a>
          <ul>
            <li><a href="#option-1-polkadotjs-apps">Option 1: PolkadotJS-APPS</a></li>
            <li><a href="#option-2-cli">Option 2: CLI</a></li>
          </ul>
        </li>
        <li><a href="#set-your-sessions-keys">Set Your Sessions Keys</a></li>
      </ul>
    </li>
    <li><a href="#pruntime-setup">pRuntime Setup</a></li>
    <li><a href="#phost-setup">pHost Setup</a></li>
    <li><a href="#validate-your-gatekeeper">Validate Your Gatekeeper</a>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc3/" class="group">PoC-3 Vendetta Mining Guide</a></h2>
      <section class="subsection" id="docs-poc-3-vendetta-mining-guide">
        <h3 class="section_link active"><a id="docs-11-hardware-requirement-and-configuration" href="https://wiki.phala.network/en-us/docs/poc3/1-1-hardware-configuration/">1.1 Hardware Requirement and Configuration</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#general-hardware-requirements">General Hardware Requirements</a>
      <ul>
        <li><a href="#cpu-requirement">CPU Requirement</a></li>
        <li><a href="#bios-settings">BIOS Settings</a></li>
      </ul>
    </li>
    <li><a href="#sgx-driver-installation">SGX Driver Installation</a></li>
    <li><a href="#double-check-the-sgx-capability">Double check the SGX capability</a>
      <ul>
        <li>
          <ul>
            <li><a href="#reference">Reference</a></li>
            <li><a href="#miner-community">Miner Community</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-12-software-configuration" href="https://wiki.phala.network/en-us/docs/poc3/1-2-software-configuration/">1.2 Software Configuration</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#system-requirement">System Requirement</a></li>
        <li><a href="#install-docker-ce">Install Docker-CE</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-13-set-miner-stash" href="https://wiki.phala.network/en-us/docs/poc3/1-3-set-miner-stash/">1.3 Set Miner Stash</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#connecting-to-testnet-vendetta">Connecting to Testnet Vendetta</a></li>
        <li><a href="#creating-phala-accounts">Creating Phala Accounts</a></li>
        <li><a href="#obtaining-tpha">Obtaining tPHA</a></li>
        <li><a href="#setting-miner-stash">Setting Miner Stash</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-21-deploy-the-full-stack" href="https://wiki.phala.network/en-us/docs/poc3/2-1-deploy-the-full-stack/">2.1 Deploy the Full Stack</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#deploying-phala-full-node">Deploying Phala full-node</a></li>
    <li><a href="#deploying-pruntime">Deploying pRuntime</a></li>
    <li><a href="#deploying-phost">Deploying pHost</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-22-set-commission" href="https://wiki.phala.network/en-us/docs/poc3/2-2-set-commission/">2.2 Set Commission</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-23-veirfy-the-miner-state" href="https://wiki.phala.network/en-us/docs/poc3/2-3-verify-the-miner-state/">2.3 Veirfy the Miner State</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-state-references">Mining State References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-31-set-miner-stakes" href="https://wiki.phala.network/en-us/docs/poc3/3-1-set-miner-stakes/">3.1 Set Miner Stakes</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-mining-lending-protocol">The Mining Lending Protocol</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-32-start-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-2-start-mining/">3.2 Start Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-states-verification">Mining States Verification</a></li>
    <li><a href="#mining-status-references">Mining Status References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-33-stop-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-3-stop-mining/">3.3 Stop Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#miner-state-verification">Miner State Verification</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-34-check-miner-profits" href="https://wiki.phala.network/en-us/docs/poc3/3-4-check-mining-profits/">3.4 Check Miner Profits</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-35-upgrade-miner" href="https://wiki.phala.network/en-us/docs/poc3/3-5-upgrade-miner/">3.5 Upgrade Miner</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#stop-mining">Stop mining</a></li>
    <li><a href="#purge-the-docker-containers-and-local-files">Purge the docker containers and local files</a></li>
    <li><a href="#pull-the-new-docker-image">Pull the new docker image</a></li>
    <li><a href="#bring-up-the-full-stack">Bring up the full stack</a>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-4-frequently-asked-questions" href="https://wiki.phala.network/en-us/docs/poc3/4-faq/">4 Frequently Asked Questions</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
    <li><a href="#i-glossary">I. Glossary</a></li>
    <li><a href="#ii-setting-up-multiple-miners">II. Setting up Multiple Miners</a>
      <ul>
        <li><a href="#q-shall-i-set-up-multiple-full-nodes-as-well-if-i-have-several-miner-workers">Q: Shall I set up multiple full-nodes as well if I have several miner workers?</a></li>
        <li><a href="#q-can-i-use-the-same-ip-address-if-i-have-multiple-computer">Q: Can I use the same IP address if I have multiple computer?</a></li>
        <li><a href="#q-is-a-public-internet-ip-address-necessary-and-will-it-gain-more-points-in-mining">Q: Is a public Internet IP address necessary and will it gain more points in mining?</a></li>
        <li><a href="#q-can-i-use-the-same-phala-account-for-multiple-miners">Q: Can I use the same Phala account for multiple miners?</a></li>
        <li><a href="#q-will-there-be-a-solution-to-registering-multiple-miner-accounts-in-a-short-time">Q: Will there be a solution to registering multiple miner accounts in a short time?</a></li>
      </ul>
    </li>
    <li><a href="#iii-linux-updates--sgx-driver">III. Linux Updates &amp; SGX Driver</a>
      <ul>
        <li><a href="#q-got-error-apt-install---fix-broken">Q: Got error: <code>apt install --fix-broken</code></a></li>
        <li><a href="#q-got-error-need-install-curl-">Q: Got error: <code>need install curl </code></a></li>
        <li><a href="#q-it-got-stuck-after-docker-pull-commands">Q: It got stuck after <code>docker pull...</code> commands</a></li>
      </ul>
    </li>
    <li><a href="#iv-issues-related-to-phala-node-pruntime-phost">IV. Issues related to phala-node, pRuntime, pHost</a>
      <ul>
        <li><a href="#q-got-error-no-such-command-after-i-typed-docker-pull-dockerpkggithubcomphala-networkphala-dockerphala-nodepre-test-4">Q: Got error &quot;no such command&quot; after I typed <code>docker pull docker.pkg.github.com/phala-network/phala-docker/phala-node:pre-test-4</code></a></li>
        <li><a href="#q-got-error-permission-denied">Q: Got error <code>permission denied</code></a></li>
        <li><a href="#q-got-error-docker-error-response-from-darmon-conflict-the-container-name-phala-node-is-already-in-use-by-container">Q: Got error <code>docker: Error response from darmon: Conflict. The container name &quot;/phala-node&quot; is already in use by container</code></a></li>
        <li><a href="#q-got-errors-as-blow">Q: Got errors as blow:</a></li>
        <li><a href="#q-got-error-devsgxenclave-no-such-file-or-directory-or-devisgx-no-such-file-or-directory">Q: Got error: <code>/dev/sgx/enclave No such file or directory</code> or <code>/dev/isgx No such file or directory</code></a></li>
        <li><a href="#q-how-to-check-if-my-installed-driver-is-sgx-or-dcap">Q: How to check if my installed driver is SGX or DCAP?</a></li>
        <li><a href="#q-i-suspect-some-docker-container-dies--hangs--doesnt-run-correctly-but-how-can-i-debug">Q: I suspect some docker container dies / hangs / doesn't run correctly but how can I debug?</a></li>
        <li><a href="#q-how-can-i-dump-the-logs-from-the-containers">Q: How can I dump the logs from the containers?</a></li>
        <li><a href="#q-what-if-my-machine-id-is-empty-after-ive-run-all-the-commands">Q: What if my Machine ID is empty after I've run all the commands?</a></li>
      </ul>
    </li>
    <li><a href="#v-operations-on-chain">V. Operations On-chain</a>
      <ul>
        <li><a href="#q-can-i-bond-the-controller-account-with-multiple-stash-accounts">Q: Can I bond the controller account with multiple stash accounts?</a></li>
        <li><a href="#q-why-my-balance-didnt-change-after-i-have-started-mining">Q: Why my balance didn't change after I have started mining?</a></li>
        <li><a href="#q-got-error-not-controller-while-setting-commission">Q: Got error <code>Not Controller</code> while setting commission</a></li>
      </ul>
    </li>
    <li><a href="#vi-other">VI. Other</a>
      <ul>
        <li><a href="#q-i-cant-claim-test-tokens-after-clicking-click-to-burn-or-click-to-claim">Q: I can't claim test tokens after clicking <code>Click to burn</code> or <code>Click to claim</code></a></li>
        <li><a href="#q-error-happens-when-i-tried-to-run-the-self-examination-program">Q: Error happens when I tried to run the self-examination program</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-41-error-references" href="https://wiki.phala.network/en-us/docs/poc3/4.1-error-references/">4.1 Error References</a></h3><nav id="TableOfContents"></nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc2/" class="group">Legacy Docs (PoC-2)</a></h2>
      <section class="subsection" id="docs-legacy-docs-poc-2">
        <h3 class="section_link"><a id="docs-run-a-full-node" href="https://wiki.phala.network/en-us/docs/poc2/run-a-full-node/">Run a full node</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#types-of-nodes">Types of Nodes</a></li>
        <li><a href="#fast-install-instructions-linux">Fast Install Instructions (Linux)</a></li>
        <li><a href="#fast-install-instructions-mac">Fast Install Instructions (Mac)</a></li>
      </ul>
    </li>
    <li><a href="#participate-testnet-poc-2-promotion-events">Participate Testnet PoC-2 promotion events</a></li>
    <li><a href="#get-substrate">Get Substrate</a></li>
    <li><a href="#clone-and-build">Clone and Build</a></li>
    <li><a href="#run">Run</a></li>
    <li><a href="#running-an-archive-node">Running an Archive Node</a></li>
    <li><a href="#using-docker">Using Docker</a></li>
  </ul>
</nav>
      </section>
  </section>
      </section>
  </section>
</aside>

  </div>
  <section class="content">
    <h1>1.1 Hardware Requirement and Configuration</h1><p>Phala Network operates on trusted hardwares, in this case, Intel CPUs which support SGX feature. SGX was first introduced in 2015 with the sixth generation Intel Core microprocessors based on the Skylake microarchitecture. In practice, the support of SGX feature also relies on your motherboard and BIOS configurations.
In this section, we will first ensure that necessary hardware requirements are satisfied and all your hardwares are correcly configured.</p>
<h2 id="general-hardware-requirements">General Hardware Requirements</h2>
<p><img src="/images/docs/poc3/1.2.png" alt=""></p>
<h3 id="cpu-requirement">CPU Requirement</h3>
<p>You can refer to the following tutorial to ensure that your CPU is SGX-supported.</p>
<ul>
<li><a href="https://forum.phala.network/t/how-to-check-whether-your-cpu-is-sgx-supported/1252">Whether your CPU is SGX-supported</a></li>
</ul>
<h3 id="bios-settings">BIOS Settings</h3>
<p>First of all, we recommand to update your BIOS to the latest version.</p>
<ol>
<li><strong>Enter BIOS</strong>. The method varies for different motherboards, and Google is always at your service about this.</li>
<li><strong>Disable Secure Boot</strong>. Go to <code>Security</code> -&gt; <code>Secure Boot</code>, set it to <code>Disabled</code>.</li>
<li><strong>Enable SGX Extension</strong>. Go to <code>Security</code> -&gt; <code>SGX</code> (This name  may vary according to the different manufacturers), set it to <code>Enabled</code>.</li>
</ol>
<blockquote>
<p>If you can only find <code>SGX: Software Controlled</code> option, you will have to run <a href="https://github.com/intel/sgx-software-enable">sgx-software-enable</a> in Ubuntu. You can follow the Intel's instructions, build it from source and execute it. Also, we provide a prebuilt file for Ubuntu 18.04 / 20.04 that can be found <a href="https://github.com/Phala-Network/sgx-tools/releases/tag/0.1">here</a>. You can download and execute it with the following commands:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget https://github.com/Phala-Network/sgx-tools/releases/download/0.1/sgx_enable
chmod +x sgx_enable
sudo ./sgx_enable
</code></pre></td></tr></table>
</div>
</div></blockquote>
<ol start="5">
<li><strong>Use UEFI Boot</strong>. Go to <code>Boot</code> -&gt; <code>Boot Mode</code>, and make sure it was set to <code>UEFI</code>.</li>
<li>Save and reboot.</li>
</ol>
<p>You also need to make sure that Ubuntu is installed in UEFI mode. SGX is not guaranteed to work properly on the OS installed in legacy mode. In such case you may want to reinstall the system.</p>
<h2 id="sgx-driver-installation">SGX Driver Installation</h2>
<p>Intel provides two kinds of SGX drivers: SGX driver and DCAP driver. The latter one is preferred since it provides more security-related features which can be utilized by Phala in the future, while the former one provides better compatibility and supports old CPUs without FLC support. For now, both drivers work for Phala.</p>
<p>First, check if you already have either of the drivers installed:</p>
<ul>
<li>Type in command <code>ls /dev/isgx</code>. If the file exists, you have the SGX driver installed</li>
<li>Type in command <code>ls /dev/sgx</code>. If the directory exists, you have the DCAP driver installed</li>
</ul>
<p>As long as either type of driver works, your computer will be ready to mine PHA. If neither of the types works, please try to install the DCAP driver first. Type in the commands below to install DCAP driver:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install dkms
wget https://download.01.org/intel-sgx/sgx-dcap/1.9/linux/distro/ubuntu18.04-server/sgx_linux_x64_driver_1.36.2.bin
chmod +x sgx_linux_x64_driver_1.36.2.bin
sudo ./sgx_linux_x64_driver_1.36.2.bin
</code></pre></td></tr></table>
</div>
</div><p>After installation, retry <code>ls /dev/sgx</code> to check whether the installation succeeds. If the DCAP driver doesn't work, please <strong>FIRST UNINSTALL DCAP DRIVER</strong> and then switch to the SGX driver. To uninstall the DCAP driver, run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo /opt/intel/sgxdriver/uninstall.sh
</code></pre></td></tr></table>
</div>
</div><p>Then try following commands to install the SGX driver:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget https://download.01.org/intel-sgx/sgx-linux/2.12/distro/ubuntu18.04-server/sgx_linux_x64_driver_2.11.0_4505f07.bin
chmod +x sgx_linux_x64_driver_2.11.0_4505f07.bin
sudo ./sgx_linux_x64_driver_2.11.0_4505f07.bin
</code></pre></td></tr></table>
</div>
</div><p>Run <code>ls /dev/isgx</code> again to check if the SGX driver works.</p>
<h2 id="double-check-the-sgx-capability">Double check the SGX capability</h2>
<p>After the installation of your driver, please use the following utility to double check if everything goes well. Docker is required for this step, and you can peek at how to install it in the <a href="/en-us/docs/poc3/1-2-software-configuration/">next secton</a>.</p>
<ul>
<li>
<p>If you are using the DCAP driver:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker run -ti --rm --name phala-sgx_detect --device /dev/sgx/enclave --device /dev/sgx/provision phalanetwork/phala-sgx_detect
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>If you are using the SGX driver:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker run -ti --rm --name phala-sgx_detect --device /dev/isgx phalanetwork/phala-sgx_detect
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Even if there's no <code>/dev/sgx</code> or <code>/dev/isgx</code>, you can still run the utility to collect some diagnose information:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker run -ti --rm --name phala-sgx_detect phalanetwork/phala-sgx_detect
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>Please pay attention to the following checks:</p>
<ol>
<li>SGX system software → Able to launch enclaves → <code>Production Mode</code></li>
<li>Flexible launch control → <code>Able to launch production mode enclave</code></li>
</ol>
<p>Among them, <strong>the former one is a must to run Phala Network pRuntime</strong>. If it's not supported (tagged as ✘ in the report example below), we are afraid you can't mine PHA with this setup. You may want to replace the motherboard and/or the CPU.</p>
<p>The latter is not a must though, it is suggested to be checked as it would be essential to install the DCAP driver.</p>
<p>The report below would be a positive result:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-txt" data-lang="txt">Detecting SGX, this may take a minute...
aesm_service[15]: Malformed request received (May be forged for attack)
✔  SGX instruction set
  ✔  CPU support
  ✔  CPU configuration
  ✔  Enclave attributes
  ✔  Enclave Page Cache
  SGX features
    ✘  SGX2  ✘  EXINFO  ✘  ENCLV  ✘  OVERSUB  ✘  KSS
    Total EPC size: 94.0MiB
✘  Flexible launch control
  ✔  CPU support
  ？ CPU configuration
  ✘  Able to launch production mode enclave
✔  SGX system software
  ✔  SGX kernel device (/dev/isgx)
  ✔  libsgx_enclave_common
  ✔  AESM service
  ✔  Able to launch enclaves
    ✔  Debug mode
    ✘  Production mode
    ✔  Production mode (Intel whitelisted)

🕮  Flexible launch control &gt; CPU configuration
Your hardware supports Flexible Launch Control, but whether it&#39;s enabled could not be determined. More information might be available by re-running this program with sudo. Would you like to do that?
(not supported yet)

debug: Error reading MSR 3Ah: Failed to load MSR kernel module
debug: cause: Failed to load MSR kernel module
debug: cause: Failed executing modprobe
debug: cause: No such file or directory (os error 2)

More information: https://edp.fortanix.com/docs/installation/help/#flc-cpu-configuration

🕮  SGX system software &gt; Able to launch enclaves &gt; Production mode
The enclave could not be launched. This might indicate a problem with FLC.

debug: failed to load report enclave
debug: cause: failed to load report enclave
debug: cause: The EINITTOKEN provider didn&#39;t provide a token
debug: cause: aesm error code GetLicensetokenError_6

More information: https://edp.fortanix.com/docs/installation/help/#run-enclave-prod

You&#39;re all set to start running SGX programs!
Generated machine id:
[162, 154, 220, 15, 163, 137, 184, 233, 251, 203, 145, 36, 214, 55, 32, 54]

Testing RA...
aesm_service[15]: [ADMIN]EPID Provisioning initiated
aesm_service[15]: The Request ID is 09a2bed647d24f909d4a3990f8e28b4a
aesm_service[15]: The Request ID is 8d1aa4104b304e12b7312fce06881260
aesm_service[15]: [ADMIN]EPID Provisioning successful
isvEnclaveQuoteStatus = GROUP_OUT_OF_DATE
platform_info_blob { sgx_epid_group_flags: 4, sgx_tcb_evaluation_flags: 2304, pse_evaluation_flags: 0, latest_equivalent_tcb_psvn: [15, 15, 2, 4, 1, 128, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 0], latest_pse_isvsvn: [0, 11], latest_psda_svn: [0, 0, 0, 2], xeid: 0, gid: 2919956480, signature: sgx_ec256_signature_t { gx: [99, 239, 225, 171, 96, 219, 216, 210, 246, 211, 20, 101, 254, 193, 246, 66, 170, 40, 255, 197, 80, 203, 17, 34, 164, 2, 127, 95, 41, 79, 233, 58], gy: [141, 126, 227, 92, 128, 3, 10, 32, 239, 92, 240, 58, 94, 167, 203, 150, 166, 168, 180, 191, 126, 196, 107, 132, 19, 84, 217, 14, 124, 14, 245, 179] } }
advisoryURL = https://security-center.intel.com
advisoryIDs = &#34;INTEL-SA-00219&#34;, &#34;INTEL-SA-00289&#34;, &#34;INTEL-SA-00320&#34;, &#34;INTEL-SA-00329&#34;
</code></pre></td></tr></table>
</div>
</div><p>If your got a report like below, please screenshot it, and send it to <a href="https://discord.gg/zjdJ7d844d">Phala Discord Server</a> or <a href="https://t.me/phalaminer">Telegram Miner Group</a> for help.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-txt" data-lang="txt">Detecting SGX, this may take a minute...
✔  SGX instruction set
  ✔  CPU support // if tagged with ❌: it does not suppoort SGX function, you would need to use other types of CPU.
  ✔  CPU configuration // if tagged with ❌: you would need to check BIOS updates.
  ✔  Enclave attributes // if tagged with ❌: probably caused by [CPU support issue] and [CPU configuration]
  ✔  Enclave Page Cache // if tagged with ❌: probably caused by [CPU support issue] and [CPU configuration]
  SGX features
    ✘  SGX2  ✘  EXINFO  ✘  ENCLV  ✘  OVERSUB  ✘  KSS // It&#39;s OK if SGX2 was tagged with ❌. Phala has not integrated with SGX2 technology in the current stage.
    Total EPC size: 94.0MiB
✘  Flexible launch control
  ✔  CPU support
  ✘  CPU configuration // if tagged with ❌: you can give it a try but your miner might be affected when the SGX driver upgrades in the future.
✔  SGX system software
  ✔  SGX kernel device (/dev/isgx)
  ✔  libsgx_enclave_common
  ✔  AESM service
  ✔  Able to launch enclaves
    ✔  Debug mode
    ✘  Production mode // if tagged with ❌: you would need to check BIOS updates.
    ✔  Production mode (Intel whitelisted)

🕮  Flexible launch control &gt; CPU configuration
Your hardware supports Flexible Launch Control, but it&#39;s not enabled in the BIOS. Reboot your machine and try to enable FLC in your BIOS. Alternatively, try updating your BIOS to the latest version or contact your BIOS vendor.

debug: MSR 3Ah IA32_FEATURE_CONTROL.SGX_LC = 0

More information: https://edp.fortanix.com/docs/installation/help/#flc-cpu-configuration

🕮  SGX system software &gt; Able to launch enclaves &gt; Production mode
The enclave could not be launched. This might indicate a problem with FLC.

debug: failed to load report enclave
debug: cause: failed to load report enclave
debug: cause: The EINITTOKEN provider didn&#39;t provide a token
debug: cause: aesm error code GetLicensetokenError_6
</code></pre></td></tr></table>
</div>
</div><p>If you can't run Phala pRuntime with both of them tagged as ✔, you may have to check whether your BIOS is the latest version with latest security patches. If you still can't run Phala pRuntime docker with the latest BIOS of your motherboard manufacturer, we are afraid you can't mine PHA for now with this motherboard.</p>
<hr>
<h4 id="reference">Reference</h4>
<ol>
<li><a href="https://www.trustonic.com/technical-articles/what-is-a-trusted-execution-environment-tee/">What is Trusted Execution Environment</a></li>
<li><a href="https://software.intel.com/content/www/us/en/develop/topics/software-guard-extensions.html">What is SGX</a></li>
</ol>
<h4 id="miner-community">Miner Community</h4>
<p><a href="https://discord.gg/zzhfUjU"><img src="https://img.shields.io/discord/697726436211163147?label=Phala%20Discord" alt=""></a> <a href="https://t.me/phalaminer"><img src="https://img.shields.io/badge/Join-Telegram-blue" alt=""></a></p>

    <div class="pager">
  
  <div class="pager_item prev">
    
    <a href="https://wiki.phala.network/en-us/docs/poc2/run-a-full-node/" class="pager_link button" title="Run a full node">
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
      <span class="pager_label">Run a full node</span>
    </a>
  </div>
  

  
  <div class="pager_item next">
    
    <a href="https://wiki.phala.network/en-us/docs/developer/run-a-local-development-network/" class="pager_link button" title="1.1 Run a Local Development Network">
      <span class="pager_label">1.1 Run a Local Development Network</span>
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
    </a>
  </div>
  
</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
</svg>
  </section>
</div>

  </main>
<footer class="mt-2 pt-2 pb-2">
  <div class="wrap">
    <p>&copy; 2020 Phala Network</p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
</svg>
<script src="https://wiki.phala.network/js/bundle.min.178aa2a740cfcbf4e6f0049bc9e83012daac7e717754fc6c8a578411627961f20a43360b7e1a8f0959c4efcc1065e22d235f7b4c91a311f5ce548d4435719d6b.js"></script>
<script src="https://wiki.phala.network/js/search.min.00b5d69fa551b2f817fbe61f601c0817b724330ecd2ccf606bac46588f38519b908c4abff71e08c8dc79a20ad622e2a3a30b3d9e4cbc3b97bf5c2b378d34f6ad.js" async defer></script>

</body>
</html>
