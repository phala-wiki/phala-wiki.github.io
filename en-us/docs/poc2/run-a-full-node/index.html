<!doctype html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.76.4" />
<link rel="apple-touch-icon" sizes="180x180" href='https://wiki.phala.network/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='https://wiki.phala.network/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='https://wiki.phala.network/favicons/favicon-16x16.png'>
<link rel="manifest" href='https://wiki.phala.network/favicons/site.webmanifest'>
<link rel="mask-icon" href='https://wiki.phala.network/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='https://wiki.phala.network/favicons/favicon.ico'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-config" content='https://wiki.phala.network/favicons/browserconfig.xml'>
<meta name="theme-color" content="#ffffff">

<title>Run a full node | Phala Network Wiki</title><meta property="og:title" content="Run a full node" />
<meta property="og:description" content="If you&#39;re building dapps or products on a Phala Network, you probably want the ability to run a node-as-a-back-end. After all, it&#39;s always better to rely on your own infrastructure than on a third-party-hosted one in this brave new decentralized world.
This guide will show you how to connect to Phala Network PoC-2. First, let&#39;s clarify the term full node.
Types of Nodes A blockchain&#39;s growth comes from a genesis block, extrinsics, and events." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wiki.phala.network/en-us/docs/poc2/run-a-full-node/" />
<meta property="article:published_time" content="2020-07-06T22:30:41+08:00" />
<meta property="article:modified_time" content="2020-07-06T22:30:41+08:00" /><meta property="og:site_name" content="Phala Network Wiki" />
<meta itemprop="name" content="Run a full node">
<meta itemprop="description" content="If you&#39;re building dapps or products on a Phala Network, you probably want the ability to run a node-as-a-back-end. After all, it&#39;s always better to rely on your own infrastructure than on a third-party-hosted one in this brave new decentralized world.
This guide will show you how to connect to Phala Network PoC-2. First, let&#39;s clarify the term full node.
Types of Nodes A blockchain&#39;s growth comes from a genesis block, extrinsics, and events.">
<meta itemprop="datePublished" content="2020-07-06T22:30:41+08:00" />
<meta itemprop="dateModified" content="2020-07-06T22:30:41+08:00" />
<meta itemprop="wordCount" content="1230">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Run a full node"/>
<meta name="twitter:description" content="If you&#39;re building dapps or products on a Phala Network, you probably want the ability to run a node-as-a-back-end. After all, it&#39;s always better to rely on your own infrastructure than on a third-party-hosted one in this brave new decentralized world.
This guide will show you how to connect to Phala Network PoC-2. First, let&#39;s clarify the term full node.
Types of Nodes A blockchain&#39;s growth comes from a genesis block, extrinsics, and events."/>


<link rel="stylesheet" href="https://wiki.phala.network/css/styles.00cd19bd8df4b2646453fa51727f45ea777b6a03a021e895ccfce9e41b950e6cf4ebd3e3aa342d35fe46b447bdf07690468037904fb5de0b4e2c08a01a9c83e5.css" integrity="sha512-AM0ZvY30smRkU/pRcn9F6nd7agOgIeiVzPzp5BuVDmz069PjqjQtNf5GtEe98HaQRoA3kE&#43;13gtOLAigGpyD5Q==">


  
  
    
    
    
    
  
    
    
    
    
  
  
  <link href="//fonts.googleapis.com/css?family=Recursive:300,400,500,600|Lato:300,400,500,600" rel="stylesheet">

</head>
<body class="page-page">
  <header class="nav_header"><nav class="wrap nav">
	<a href="https://wiki.phala.network" class="nav_brand">
		<picture>
			
			<img srcset = 'https://wiki.phala.network/images/logo-phala-48.png' alt = 'Phala Network Wiki Logo'>
		</picture>
		<label class="nav_toggle">Menu</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder="" id="find" autocomplete="off">
  <div class="search_results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/en-us/docs/"><span>Docs</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/zh-cn/"><span>中文站</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://phala.network"><span>Homepage</span></a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link" href="https://github.com/Phala-Network/phala-wiki/" target="_blank">GitHub</a>
		</li>
		<li class="nav-item"><div class = 'color_mode'>
  <label for = 'mode'></label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <main class="main wrap pt-4"><div class="grid-auto">
  <div><aside class="aside">
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/" class="group">Overview</a></h2>
      <section class="subsection" id="docs-overview">
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/developer/" class="group">Contract Development Tutorial</a></h2>
      <section class="subsection" id="docs-contract-development-tutorial">
        <h3 class="section_link"><a id="docs-11-run-a-local-development-network" href="https://wiki.phala.network/en-us/docs/developer/run-a-local-development-network/">1.1 Run a Local Development Network</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment">Environment</a></li>
    <li><a href="#build-the-core-blockchain">Build the core blockchain</a></li>
    <li><a href="#build-the-web-ui">Build the Web UI</a></li>
    <li><a href="#send-some-secret-tokens">Send some secret tokens</a></li>
    <li><a href="#conclusion">Conclusion</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-12-hello-world-your-first-confidential-contract" href="https://wiki.phala.network/en-us/docs/developer/your-first-confidential-contract/">1.2 Hello World: your first confidential contract</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment-and-build">Environment and Build</a></li>
    <li><a href="#walk-through">Walk-through</a>
      <ul>
        <li><a href="#contract">Contract</a></li>
        <li><a href="#frontend">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#implement-a-secret-notebook">Implement a secret notebook</a>
      <ul>
        <li><a href="#contract-1">Contract</a></li>
        <li><a href="#frontend-1">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#put-everything-together">Put everything together</a></li>
    <li><a href="#summary">Summary</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-13-troubleshooting" href="https://wiki.phala.network/en-us/docs/developer/troubleshooting/">1.3 Troubleshooting</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#phala-blockchain"><code>phala-blockchain</code></a>
      <ul>
        <li><a href="#probelm-consider-giving-accuracy-a-type-when-building-substrate">Probelm: &quot;consider giving <code>accuracy</code> a type&quot; when building substrate</a></li>
        <li><a href="#probelm-duplicate-lang-item">Probelm: &quot;duplicate lang item&quot;</a></li>
      </ul>
    </li>
    <li><a href="#apps-ng-related"><code>apps-ng</code> related</a>
      <ul>
        <li><a href="#probelm-polkadotdevconfigtsconfig-not-found">Probelm: '@polkadot/dev/config/tsconfig' not found</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/gatekeeper/" class="group">GateKeeper Guide</a></h2>
      <section class="subsection" id="docs-gatekeeper-guide">
        <h3 class="section_link"><a id="docs-run-a-gatekeeper" href="https://wiki.phala.network/en-us/docs/gatekeeper/run-a-gatekeeper/">Run a Gatekeeper</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#setup-environment">Setup Environment</a></li>
    <li><a href="#synchronize-chain-data">Synchronize Chain Data</a>
      <ul>
        <li><a href="#to-compile-your-gatekeeper-node">*To Compile Your Gatekeeper Node</a></li>
      </ul>
    </li>
    <li><a href="#bond-pha">Bond PHA</a></li>
    <li><a href="#set-session-keys">Set Session Keys</a>
      <ul>
        <li><a href="#generating-the-session-keys">Generating the Session Keys</a>
          <ul>
            <li><a href="#option-1-polkadotjs-apps">Option 1: PolkadotJS-APPS</a></li>
            <li><a href="#option-2-cli">Option 2: CLI</a></li>
          </ul>
        </li>
        <li><a href="#set-your-sessions-keys">Set Your Sessions Keys</a></li>
      </ul>
    </li>
    <li><a href="#pruntime-setup">pRuntime Setup</a></li>
    <li><a href="#phost-setup">pHost Setup</a></li>
    <li><a href="#validate-your-gatekeeper">Validate Your Gatekeeper</a>
      <ul>
        <li><a href="#tech-support">Tech Support</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc3/" class="group">PoC-3 Vendetta Mining Guide</a></h2>
      <section class="subsection" id="docs-poc-3-vendetta-mining-guide">
        <h3 class="section_link"><a id="docs-11-hardware-requirement-and-configuration" href="https://wiki.phala.network/en-us/docs/poc3/1-1-hardware-configuration/">1.1 Hardware Requirement and Configuration</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#general-hardware-requirements">General Hardware Requirements</a>
      <ul>
        <li><a href="#cpu-requirement">CPU Requirement</a></li>
        <li><a href="#bios-settings">BIOS Settings</a></li>
      </ul>
    </li>
    <li><a href="#sgx-driver-installation">SGX Driver Installation</a></li>
    <li><a href="#double-check-the-sgx-capability">Double check the SGX capability</a>
      <ul>
        <li>
          <ul>
            <li><a href="#reference">Reference</a></li>
            <li><a href="#tech-support">Tech Support</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-12-software-configuration" href="https://wiki.phala.network/en-us/docs/poc3/1-2-software-configuration/">1.2 Software Configuration</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#system-requirement">System Requirement</a></li>
        <li><a href="#install-docker-ce">Install Docker-CE</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-13-set-miner-stash" href="https://wiki.phala.network/en-us/docs/poc3/1-3-set-miner-stash/">1.3 Set Miner Stash</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#connecting-to-testnet-vendetta">Connecting to Testnet Vendetta</a></li>
        <li><a href="#creating-phala-accounts">Creating Phala Accounts</a></li>
        <li><a href="#obtaining-tpha">Obtaining tPHA</a></li>
        <li><a href="#setting-miner-stash">Setting Miner Stash</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-21-deploy-the-full-stack" href="https://wiki.phala.network/en-us/docs/poc3/2-1-deploy-the-full-stack/">2.1 Deploy the Full Stack</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#deploying-phala-full-node">Deploying Phala full-node</a></li>
    <li><a href="#deploying-pruntime">Deploying pRuntime</a></li>
    <li><a href="#deploying-phost">Deploying pHost</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-22-set-commission" href="https://wiki.phala.network/en-us/docs/poc3/2-2-set-commission/">2.2 Set Commission</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-23-veirfy-the-miner-state" href="https://wiki.phala.network/en-us/docs/poc3/2-3-verify-the-miner-state/">2.3 Veirfy the Miner State</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-state-references">Mining State References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-31-set-miner-stakes" href="https://wiki.phala.network/en-us/docs/poc3/3-1-set-miner-stakes/">3.1 Set Miner Stakes</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-mining-lending-protocol">The Mining Lending Protocol</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-32-start-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-2-start-mining/">3.2 Start Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-states-verification">Mining States Verification</a></li>
    <li><a href="#mining-status-references">Mining Status References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-33-stop-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-3-stop-mining/">3.3 Stop Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#miner-state-verification">Miner State Verification</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-34-check-miner-profits" href="https://wiki.phala.network/en-us/docs/poc3/3-4-check-mining-profits/">3.4 Check Miner Profits</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-35-upgrade-miner" href="https://wiki.phala.network/en-us/docs/poc3/3-5-upgrade-miner/">3.5 Upgrade Miner</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#stop-mining">Stop mining</a></li>
    <li><a href="#purge-the-docker-containers-and-local-files">Purge the docker containers and local files</a></li>
    <li><a href="#pull-the-new-docker-image">Pull the new docker image</a></li>
    <li><a href="#bring-up-the-full-stack">Bring up the full stack</a>
      <ul>
        <li><a href="#tech-support">Tech Support</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-4-frequently-asked-questions" href="https://wiki.phala.network/en-us/docs/poc3/4-faq/">4 Frequently Asked Questions</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#tech-support">Tech Support</a></li>
      </ul>
    </li>
    <li><a href="#i-glossary">I. Glossary</a></li>
    <li><a href="#ii-setting-up-multiple-miners">II. Setting up Multiple Miners</a>
      <ul>
        <li><a href="#q-shall-i-set-up-multiple-full-nodes-as-well-if-i-have-several-miner-workers">Q: Shall I set up multiple full-nodes as well if I have several miner workers?</a></li>
        <li><a href="#q-can-i-use-the-same-ip-address-if-i-have-multiple-computer">Q: Can I use the same IP address if I have multiple computer?</a></li>
        <li><a href="#q-is-a-public-internet-ip-address-necessary-and-will-it-gain-more-points-in-mining">Q: Is a public Internet IP address necessary and will it gain more points in mining?</a></li>
        <li><a href="#q-can-i-use-the-same-phala-account-for-multiple-miners">Q: Can I use the same Phala account for multiple miners?</a></li>
      </ul>
    </li>
    <li><a href="#iii-linux-updates--sgx-driver">III. Linux Updates &amp; SGX Driver</a>
      <ul>
        <li><a href="#q-got-error-apt-install---fix-broken">Q: Got error: <code>apt install --fix-broken</code></a></li>
        <li><a href="#q-got-error-need-install-curl-">Q: Got error: <code>need install curl </code></a></li>
        <li><a href="#q-it-got-stuck-after-docker-pull-commands">Q: It got stuck after <code>docker pull...</code> commands</a></li>
      </ul>
    </li>
    <li><a href="#iv-issues-related-to-phala-node-pruntime-phost">IV. Issues related to phala-node, pRuntime, pHost</a>
      <ul>
        <li><a href="#q-got-error-no-such-command-after-i-typed-docker-pull-dockerpkggithubcomphala-networkphala-dockerphala-nodepre-test-4">Q: Got error &quot;no such command&quot; after I typed <code>docker pull docker.pkg.github.com/phala-network/phala-docker/phala-node:pre-test-4</code></a></li>
        <li><a href="#q-got-error-permission-denied">Q: Got error <code>permission denied</code></a></li>
        <li><a href="#q-got-error-docker-error-response-from-darmon-conflict-the-container-name-phala-node-is-already-in-use-by-container">Q: Got error <code>docker: Error response from darmon: Conflict. The container name &quot;/phala-node&quot; is already in use by container</code></a></li>
        <li><a href="#q-got-errors-as-blow">Q: Got errors as blow:</a></li>
        <li><a href="#q-got-error-devsgxenclave-no-such-file-or-directory-or-devisgx-no-such-file-or-directory">Q: Got error: <code>/dev/sgx/enclave No such file or directory</code> or <code>/dev/isgx No such file or directory</code></a></li>
        <li><a href="#q-how-to-check-if-my-installed-driver-is-sgx-or-dcap">Q: How to check if my installed driver is SGX or DCAP?</a></li>
        <li><a href="#q-i-suspect-some-docker-container-dies--hangs--doesnt-run-correctly-but-how-can-i-debug">Q: I suspect some docker container dies / hangs / doesn't run correctly but how can I debug?</a></li>
        <li><a href="#q-how-can-i-dump-the-logs-from-the-containers">Q: How can I dump the logs from the containers?</a></li>
        <li><a href="#q-what-if-my-machine-id-is-empty-after-ive-run-all-the-commands">Q: What if my Machine ID is empty after I've run all the commands?</a></li>
      </ul>
    </li>
    <li><a href="#v-operations-on-chain">V. Operations On-chain</a>
      <ul>
        <li><a href="#q-can-i-bond-the-controller-account-with-multiple-stash-accounts">Q: Can I bond the controller account with multiple stash accounts?</a></li>
        <li><a href="#q-why-my-balance-didnt-change-after-i-have-started-mining">Q: Why my balance didn't change after I have started mining?</a></li>
        <li><a href="#q-got-error-not-controller-while-setting-commission">Q: Got error <code>Not Controller</code> while setting commission</a></li>
      </ul>
    </li>
    <li><a href="#vi-other">VI. Other</a>
      <ul>
        <li><a href="#q-i-cant-claim-test-tokens-after-clicking-click-to-burn-or-click-to-claim">Q: I can't claim test tokens after clicking <code>Click to burn</code> or <code>Click to claim</code></a></li>
        <li><a href="#q-error-happens-when-i-tried-to-run-the-self-examination-program">Q: Error happens when I tried to run the self-examination program</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc2/" class="group">Legacy Docs (PoC-2)</a></h2>
      <section class="subsection" id="docs-legacy-docs-poc-2">
        <h3 class="section_link active"><a id="docs-run-a-full-node" href="https://wiki.phala.network/en-us/docs/poc2/run-a-full-node/">Run a full node</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#types-of-nodes">Types of Nodes</a></li>
        <li><a href="#fast-install-instructions-linux">Fast Install Instructions (Linux)</a></li>
        <li><a href="#fast-install-instructions-mac">Fast Install Instructions (Mac)</a></li>
      </ul>
    </li>
    <li><a href="#participate-testnet-poc-2-promotion-events">Participate Testnet PoC-2 promotion events</a></li>
    <li><a href="#get-substrate">Get Substrate</a></li>
    <li><a href="#clone-and-build">Clone and Build</a></li>
    <li><a href="#run">Run</a></li>
    <li><a href="#running-an-archive-node">Running an Archive Node</a></li>
    <li><a href="#using-docker">Using Docker</a></li>
  </ul>
</nav>
      </section>
  </section>
      </section>
  </section>
</aside>

  </div>
  <section class="content">
    <h1>Run a full node</h1><p>If you're building dapps or products on a Phala Network,
you probably want the ability to run a node-as-a-back-end. After all, it's
always better to rely on your own infrastructure than on a third-party-hosted one in this brave new
decentralized world.</p>
<p>This guide will show you how to connect to <a href="https://poc2.phala.network">Phala Network PoC-2</a>. First, let's
clarify the term <em>full node</em>.</p>
<h3 id="types-of-nodes">Types of Nodes</h3>
<p>A blockchain's growth comes from a <em>genesis block</em>, <em>extrinsics</em>, and <em>events</em>.</p>
<p>When a Gatekeeper seals block 1, it takes the blockchain's state at block 0. It then applies all
pending changes on top of it, and emits the events that are the result of these changes. Later, the
state of the chain at block 1 is used in the same way to build the state of the chain at block 2,
and so on. Once two thirds of the Gatekeepers agree on a specific block being valid, it is finalized.</p>
<p>An <strong>archive node</strong> keeps all the past blocks. An archive node makes it convenient to query the past
state of the chain at any point in time. Finding out what an account's balance at a certain block
was, or which extrinsics resulted in a certain state change are fast operations when using an
archive node. However, an archive node takes up a lot of disk space - around Kusama's 1.6 millionth
block this was around 15 to 20GB. When running a Gatekeeper, this requirement doubles as
<a href="%5Bmaintain-guides-how-to-setup-sentry-node%5D(https://wiki.polkadot.network/docs/en/maintain-guides-how-to-setup-sentry-node)">the sentry node</a> in front of a Gatekeeper should be an
archive node too.</p>
<p>A <strong>full node</strong> is <em>pruned</em>, meaning it discards all information older than 256 blocks, but keeps
the extrinsics for all past blocks, and the genesis block. A node that is pruned this way requires
much less space than an archive node. In order to query past state through a full node, a user would
have to wait for the node to rebuild the chain up until that block. A full node <em>can</em> rebuild the
entire chain with no additional input from other nodes and become an archive node. One caveat is
that if finality stalled for some reason and the last finalized block is more than 256 blocks
behind, a pruned full node will not be able to sync to the network.</p>
<p>Archive nodes are used by utilities that need past information - like block explorers, council
scanners, discussion platforms like <a href="https://polkassembly.io">Polkassembly</a>, and others. They need
to be able to look at past on-chain data. Full nodes are used by everyone else - they allow you to
read the current state of the chain and to submit transactions directly to the chain without relying
on a centralized infrastructure provider.</p>
<p>Another type of node is a <strong>light node</strong>. A light node has only the runtime and the current state,
but does not store past extrinsics and so cannot restore the full chain from genesis. Light nodes
are useful for resource restricted devices. An interesting use-case of light nodes is a Chrome
extension, which is a node in its own right, running the runtime in WASM format:
<a href="https://github.com/paritytech/substrate-light-ui">https://github.com/paritytech/substrate-light-ui</a></p>
<h3 id="fast-install-instructions-linux">Fast Install Instructions (Linux)</h3>
<blockquote>
<p>Not recommended if you're a Gatekeeper. Please see
<a href="https://wiki.polkadot.network/docs/en/maintain-guides-secure-validator">secure Gatekeeper setup</a></p>
</blockquote>
<p>For the most recent binary please see the
<a href="https://github.com/Phala-Network/phala-blockchain/releases/">release page</a> on the phala-blockchain repository. The URL
in the code snippet below may become slightly out-of-date.</p>
<p>Also please note that the nature of pre-built binaries means that they may not work on your
particular architecture or Linux distribution. If you see an error like
<code>cannot execute binary file: Exec format error</code> it likely means the binary is not compatible with
your system. You will either need to compile the <a href="#clone-and-build">source code yourself</a> or use
<a href="#using-docker">docker</a>.</p>
<ul>
<li>Download Phala Network binary by running:
<code>curl -sL https://github.com/Phala-Network/phala-blockchain/releases/download/poc2-3.0-alpha1/phala-node -o phala-node</code></li>
<li>Run the following: <code>sudo chmod +x phala-node</code></li>
<li>Run the following: <code>./phala-node --chain poc2 --name &quot;Your Node Name Here&quot;</code> (check <a href="#participate-testnet-poc-2-promotion-events">participating PoC-2 events</a> for naming convention if you are)</li>
<li>Find your node at <a href="https://telemetry.polkadot.io/#list/Phala%20PoC-2">https://telemetry.polkadot.io/#list/Phala%20PoC-2</a></li>
</ul>
<h3 id="fast-install-instructions-mac">Fast Install Instructions (Mac)</h3>
<blockquote>
<p>Not recommended if you're a Gatekeeper. Please see
<a href="https://wiki.polkadot.network/docs/en/maintain-guides-secure-validator">secure Gatekeeper setup</a></p>
</blockquote>
<ul>
<li>Type terminal in the macOS searchbar/searchlight to open the 'terminal' application</li>
<li>Install Homebrew within the terminal by running:
<code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;</code></li>
<li>Then run: <code>brew install openssl cmake llvm</code></li>
<li>Install Rust in your terminal by running:
<code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></li>
<li>Once Rust is installed, run the following command to clone and build the Phala Network code:
<pre><code>git clone https://github.com/Phala-Network/phala-blockchain
cd phala-blockchain
./scripts/init.sh
git submodule update --init
cargo build --release
</code></pre></li>
<li>Run the following command to start your node: <code>./target/release/phala-node --chain poc2 --name &quot;My node's name&quot;</code> (check <a href="#participate-testnet-poc-2-promotion-events">participating PoC-2 events</a> for naming convention if you are)</li>
<li>Find your node at <a href="https://telemetry.polkadot.io/#list/Phala%20PoC-2">https://telemetry.polkadot.io/#list/Phala%20PoC-2</a></li>
</ul>
<h2 id="participate-testnet-poc-2-promotion-events">Participate Testnet PoC-2 promotion events</h2>
<p>To participate the PoC-2 events, it's required to set your node name in the format below:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./phala-node --name <span class="s2">&#34;Name | Controller account address&#34;</span> &lt;...other arguments&gt;
</code></pre></td></tr></table>
</div>
</div><p>where &quot;Controller account address&quot; is the address of your Controller account for staking (not Stash account). Please make sure there are two spaces close to the vertical bar symbol.</p>
<blockquote>
<p>Example: the command below brings up an archive node with the name &quot;PhalaMiner&quot; and its controller account</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./phala-node --name <span class="s2">&#34;PhalaMiner | 5Ea32SkcVaEmBVFNeMycjuAQKNzHzwosFrhEhwUFmawsEtkt&#34;</span> --pruning archive
</code></pre></td></tr></table>
</div>
</div></blockquote>
<h2 id="get-substrate">Get Substrate</h2>
<p>Follow instructions as outlined
<a href="https://substrate.dev/docs/en/knowledgebase/getting-started">here</a> - note that Windows users will
have their work cut out for them. It's better to use a virtual machine instead.</p>
<p>Test if the installation was successful by running <code>cargo --version</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ cargo --version
cargo 1.41.0 <span class="o">(</span>626f0f40e 2019-12-03<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="clone-and-build">Clone and Build</h2>
<p>The <a href="https://github.com/Phala-Network/phala-blockchain">Phala-Network/phala-blockchain</a> repo's master branch contains the
latest Phala Network code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git clone https://github.com/Phala-Network/phala-blockchain
<span class="nb">cd</span> phala-blockchain
./scripts/init.sh
git submodule update --init
cargo build --release
</code></pre></td></tr></table>
</div>
</div><h2 id="run">Run</h2>
<p>The built binary will be in the <code>target/release</code> folder, called <code>phala-node</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./target/release/phala-node --chain poc2 --name <span class="s2">&#34;My node&#39;s name&#34;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Check <a href="#participate-testnet-poc-2-promotion-events">participating PoC-2 events</a> for naming convention if you are.</p>
</blockquote>
<p>Use the <code>--help</code> flag to find out which flags you can use when running the node. For example, if
<a href="https://wiki.polkadot.network/docs/en/maintain-wss">connecting to your node remotely</a>, you'll probably want to use <code>--ws-external</code> and
<code>--rpc-cors all</code>.</p>
<p>The syncing process will take a while depending on your bandwidth, processing power, disk speed and
RAM. On a $10 DigitalOcean droplet, the process can complete in some 36 hours.</p>
<p>Congratulations, you're now syncing with Phala Network. Keep in mind that the process is identical when
using any other Substrate chain.</p>
<h2 id="running-an-archive-node">Running an Archive Node</h2>
<p>When running as a simple sync node (above), only the state of the past 256 blocks will be kept. When
validating, it defaults to <a href="#types-of-nodes">archive mode</a>. To keep the full state use the
<code>--pruning</code> flag:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./target/release/phala-node --chain poc2 --name <span class="s2">&#34;My node&#39;s name&#34;</span> --pruning archive
</code></pre></td></tr></table>
</div>
</div><p>It is possible to almost quadruple synchronization speed by using an additional flag:
<code>--wasm-execution Compiled</code>. Note that this uses much more CPU and RAM, so it should be turned off
after the node is in sync.</p>
<h2 id="using-docker">Using Docker</h2>
<p>Finally, you can use Docker to run your node in a container. Doing this is a bit more advanced so
it's best left up to those that either already have familiarity with docker, or have completed the
other set-up instructions in this guide.</p>
<p>The reference docker file is located <a href="https://github.com/Phala-Network/phala-blockchain/blob/master/Dockerfile">here</a>.
Please note that by default the docker file only spawn a two nodes local testnet node, not a single
node connecting to the public blockchain. This is mainly used for development. You can create your
own docker file for connecting to Phala Network PoC2.</p>

    <div class="pager">
  
  <div class="pager_item prev">
    
    <a href="https://wiki.phala.network/en-us/docs/gatekeeper/run-a-gatekeeper/" class="pager_link button" title="Run a Gatekeeper">
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
      <span class="pager_label">Run a Gatekeeper</span>
    </a>
  </div>
  

  
  <div class="pager_item next">
    
    <a href="https://wiki.phala.network/en-us/docs/poc3/1-1-hardware-configuration/" class="pager_link button" title="1.1 Hardware Requirement and Configuration">
      <span class="pager_label">1.1 Hardware Requirement and Configuration</span>
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
    </a>
  </div>
  
</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
</svg>
  </section>
</div>

  </main>
<footer class="mt-2 pt-2 pb-2">
  <div class="wrap">
    <p>&copy; 2020 Phala Network</p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
</svg>
<script src="https://wiki.phala.network/js/bundle.min.178aa2a740cfcbf4e6f0049bc9e83012daac7e717754fc6c8a578411627961f20a43360b7e1a8f0959c4efcc1065e22d235f7b4c91a311f5ce548d4435719d6b.js"></script>
<script src="https://wiki.phala.network/js/search.min.7a03b6f0924fbf8782c0db0bbbfed770eb849aa69783780ba69686b275d5714f9129a91c2a97942ef003be6921c0bcc429e2e41f587845a85ad97d382640ef23.js" async defer></script>

</body>
</html>
