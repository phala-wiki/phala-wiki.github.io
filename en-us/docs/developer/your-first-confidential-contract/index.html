<!doctype html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.81.0" />
<link rel="apple-touch-icon" sizes="180x180" href='https://wiki.phala.network/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='https://wiki.phala.network/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='https://wiki.phala.network/favicons/favicon-16x16.png'>
<link rel="manifest" href='https://wiki.phala.network/favicons/site.webmanifest'>
<link rel="mask-icon" href='https://wiki.phala.network/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='https://wiki.phala.network/favicons/favicon.ico'>
<meta name="msapplication-config" content='https://wiki.phala.network/favicons/browserconfig.xml'>
<title>1.2 Hello World: your first confidential contract | Phala Network Wiki</title><meta property="og:title" content="1.2 Hello World: your first confidential contract" />
<meta property="og:description" content="Basic understanding of Rust language programming and smart contract development knowledge is necessary to follow this tutorial.
 Overview In this tutorial, we are going to continue on the development environment we have set up in the previous chapter, and explore how a confidential smart contract is made. By the end of this tutorial, you will:
 Learn how to develop a confidential contract Interact with the contract from the Web UI Build your own confidential contract  For a high-level overview of Phala Network, please check the previous chapters." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wiki.phala.network/en-us/docs/developer/your-first-confidential-contract/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="Phala Network Wiki" />

<meta itemprop="name" content="1.2 Hello World: your first confidential contract">
<meta itemprop="description" content="Basic understanding of Rust language programming and smart contract development knowledge is necessary to follow this tutorial.
 Overview In this tutorial, we are going to continue on the development environment we have set up in the previous chapter, and explore how a confidential smart contract is made. By the end of this tutorial, you will:
 Learn how to develop a confidential contract Interact with the contract from the Web UI Build your own confidential contract  For a high-level overview of Phala Network, please check the previous chapters.">

<meta itemprop="wordCount" content="1531">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="1.2 Hello World: your first confidential contract"/>
<meta name="twitter:description" content="Basic understanding of Rust language programming and smart contract development knowledge is necessary to follow this tutorial.
 Overview In this tutorial, we are going to continue on the development environment we have set up in the previous chapter, and explore how a confidential smart contract is made. By the end of this tutorial, you will:
 Learn how to develop a confidential contract Interact with the contract from the Web UI Build your own confidential contract  For a high-level overview of Phala Network, please check the previous chapters."/>


<link rel="stylesheet" href="https://wiki.phala.network/css/styles.51a94ee6f045627ad59db60801f5337e99870a05ce0773970281c0a239aa562b815158c30b1589cf2356249a382dfd3d049389ce9f946fbf3bfb30bdd316c4cc.css" integrity="sha512-UalO5vBFYnrVnbYIAfUzfpmHCgXOB3OXAoHAojmqViuBUVjDCxWJzyNWJJo4Lf09BJOJzp&#43;Ub787&#43;zC90xbEzA==">



  <meta name="description" content="Basic understanding of Rust language programming and smart contract development knowledge is necessary to follow this tutorial.
 Overview In this tutorial, we are going to continue on the development environment we have set up in the previous chapter, and explore how a confidential smart contract is made. By the end of this tutorial, you will:
 Learn how to develop a confidential contract Interact with the contract from the Web UI Build your own confidential contract  For a high-level overview of Phala Network, please check the previous chapters.">



  
  <link href="//fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet">

</head>
  
    
  
<body class="page-page"data-code="100" data-lines="false" >
  <header class="nav_header">
<nav class="wrap nav menu">
	<a href="https://wiki.phala.network" class="nav_brand">
		<picture data-lit="https://wiki.phala.network/images/logo-phala-48.png" data-dark="https://wiki.phala.network/images/logo-phala-48.png">
			
			<img srcset = 'https://wiki.phala.network/images/logo-phala-48.png' alt = 'Phala Network Wiki Logo'>
		</picture>
		<label class="nav_toggle toggle" title='' role="button">
			<svg class="icon icon_harmburger">
  <use xlink:href="#harmburger"></use>
</svg>
		</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon icon_search">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder='' id="find" autocomplete="off">
  <div class="search_results results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/en-us/docs/"><span>Docs</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://wiki.phala.network/zh-cn/"><span>中文站</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="https://phala.network"><span>Homepage</span></a>
		</li>
		
		<li class="nav-item nav_repo">
			<a class="nav-link" href="https://github.com/Phala-Network/phala-wiki/" target="_blank">
				
					GitHub
				
			</a>
		</li>
		<li class="nav-item">
<div class = 'color_mode'>
  <label for = 'mode'>
    <picture data-lit="https://wiki.phala.network/icons/sun.svg" data-dark="https://wiki.phala.network/icons/moon.svg">
      
      <img srcset = 'https://wiki.phala.network/icons/sun.svg' alt = 'Light/Dark Mode Icon' class="color_icon">
    </picture>
  </label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <div class="main wrap pt-4"><div class="grid-auto"><aside class="aside menu">
  <div>
    <label class="aside_toggle toggle" title='' role="button"> <svg class="icon icon_harmburger">
  <use xlink:href="#harmburger"></use>
</svg></label>
  </div>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/" class="group">Phala Network</a></h2>
      <section class="subsection" id="docs-phala-network">
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/developer/" class="group">Contract Development</a></h2>
      <section class="subsection" id="docs-contract-development">
        <h3 class="section_link"><a id="docs-11-run-a-local-development-network" href="https://wiki.phala.network/en-us/docs/developer/run-a-local-development-network/">1.1 Run a Local Development Network</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment">Environment</a></li>
    <li><a href="#build-the-core-blockchain">Build the core blockchain</a></li>
    <li><a href="#build-the-web-ui">Build the Web UI</a></li>
    <li><a href="#send-some-secret-tokens">Send some secret tokens</a></li>
    <li><a href="#conclusion">Conclusion</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link active"><a id="docs-12-hello-world-your-first-confidential-contract" href="https://wiki.phala.network/en-us/docs/developer/your-first-confidential-contract/">1.2 Hello World: your first confidential contract</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#environment-and-build">Environment and Build</a></li>
    <li><a href="#walk-through">Walk-through</a>
      <ul>
        <li><a href="#contract">Contract</a></li>
        <li><a href="#frontend">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#implement-a-secret-notebook">Implement a secret notebook</a>
      <ul>
        <li><a href="#contract-1">Contract</a></li>
        <li><a href="#frontend-1">Frontend</a></li>
      </ul>
    </li>
    <li><a href="#put-everything-together">Put everything together</a></li>
    <li><a href="#summary">Summary</a>
      <ul>
        <li><a href="#submit-your-work">Submit your work</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-13-troubleshooting" href="https://wiki.phala.network/en-us/docs/developer/troubleshooting/">1.3 Troubleshooting</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#phala-blockchain"><code>phala-blockchain</code></a>
      <ul>
        <li><a href="#problem-the-wasm32-unknown-unknown-target-may-not-be-installed">Problem: &quot;the <code>wasm32-unknown-unknown</code> target may not be installed&quot;</a></li>
        <li><a href="#problem-signal-9-sigkill-kill-when-building-substrate">Problem: &quot;(signal: 9, SIGKILL: kill)&quot; when building substrate</a></li>
        <li><a href="#probelm-consider-giving-accuracy-a-type-when-building-substrate">Probelm: &quot;consider giving <code>accuracy</code> a type&quot; when building substrate</a></li>
        <li><a href="#probelm-duplicate-lang-item">Probelm: &quot;duplicate lang item&quot;</a></li>
      </ul>
    </li>
    <li><a href="#apps-ng-related"><code>apps-ng</code> related</a>
      <ul>
        <li><a href="#probelm-polkadotdevconfigtsconfig-not-found">Probelm: '@polkadot/dev/config/tsconfig' not found</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc3/" class="group">PoC-3 Vendetta Mining Guide</a></h2>
      <section class="subsection" id="docs-poc-3-vendetta-mining-guide">
        <h3 class="section_link"><a id="docs-11-register-a-phala-account" href="https://wiki.phala.network/en-us/docs/poc3/1-1-register-a-phala-acocunt/">1.1 Register a Phala account</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#tip">Tip:</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-12-bind-stash-and-controller-accounts" href="https://wiki.phala.network/en-us/docs/poc3/1-2-bind-stash-and-controller-accounts/">1.2 Bind Stash and Controller accounts</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-13-check-your-hardware-bios-and-system" href="https://wiki.phala.network/en-us/docs/poc3/1-3-check-your-hardware-bios-and-system/">1.3 Check your hardware, BIOS and system</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#general-phala-hardware-requirements">General Phala Hardware Requirements</a></li>
    <li><a href="#check-your-cpu">Check Your CPU</a></li>
    <li><a href="#check-bios-settings">Check BIOS settings</a></li>
    <li><a href="#supported-operating-systems-ubuntu-1804-and-2004">Supported Operating Systems: Ubuntu 18.04 and 20.04</a>
      <ul>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-14-software-configuration" href="https://wiki.phala.network/en-us/docs/poc3/1-4-software-configuration/">1.4 Software Configuration</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#system-requirement">System Requirement</a></li>
        <li><a href="#install-phala-solo-scripts">Install Phala-solo-Scripts</a></li>
      </ul>
    </li>
    <li><a href="#double-check-the-sgx-capability">Double check the SGX capability</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-15-on-chain-staking" href="https://wiki.phala.network/en-us/docs/poc3/1-5-on-chain-stake/">1.5 On-Chain Staking</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#over-staking-for-computing-task">Over Staking for Computing Task</a>
      <ul>
        <li><a href="#process-of-staking">Process of Staking</a></li>
        <li><a href="#how-to-operating">How to Operating</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-16-introduction-of-1605-race-privacy-computing-task" href="https://wiki.phala.network/en-us/docs/poc3/1-6-introduction-of-1605-race-privacy-computing-task/">1.6 Introduction of 1605 Race Privacy Computing Task</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction-of-1605-race-privacy-computing-task">Introduction of 1605 Race Privacy Computing Task</a>
      <ul>
        <li><a href="#background-summary">Background summary</a></li>
        <li><a href="#privacy-computing-task-dispatch-algorithm">Privacy computing task dispatch algorithm</a>
          <ul>
            <li><a href="#core-logic">Core logic</a></li>
            <li><a href="#tee-worker-task-score">TEE worker task score</a></li>
            <li><a href="#weighted-random-sampling-without-replacement">Weighted random sampling without replacement</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#data-simulation-of-dispatching-algorithm">Data simulation of dispatching algorithm</a>
      <ul>
        <li>
          <ul>
            <li><a href="#the-correlation-between-the-amount-of-extra-stake-and-the-probability-of-selection">The correlation between the amount of extra stake and the probability of selection</a></li>
            <li><a href="#correlation-between-machine-performance-and-selection-probability">Correlation between machine performance and selection probability</a></li>
            <li><a href="#how-to-allocate-additional-mortgage-for-multiple-miners">How to allocate additional mortgage for multiple miners</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-21-start-the-phala-miner" href="https://wiki.phala.network/en-us/docs/poc3/2-1-start-the-phala-miner/">2.1 Start the Phala miner</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#start-the-phala-miner">Start the Phala miner</a></li>
    <li><a href="#check-the-phala-miner-status">Check the phala miner status</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-22-set-commission" href="https://wiki.phala.network/en-us/docs/poc3/2-2-set-commission/">2.2 Set Commission</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-23-verify-the-miner-state" href="https://wiki.phala.network/en-us/docs/poc3/2-3-verify-the-miner-state/">2.3 Verify the Miner State</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-state-references">Mining State References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-31-set-miner-stakes" href="https://wiki.phala.network/en-us/docs/poc3/3-1-set-miner-stakes/">3.1 Set Miner Stakes</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-mining-lending-protocol">The Mining Lending Protocol</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-32-start-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-2-start-mining/">3.2 Start Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#mining-states-verification">Mining States Verification</a></li>
    <li><a href="#mining-status-references">Mining Status References</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-33-stop-mining" href="https://wiki.phala.network/en-us/docs/poc3/3-3-stop-mining/">3.3 Stop Mining</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#miner-state-verification-onchain">Miner State Verification onchain</a></li>
    <li><a href="#miner-state-verification">Miner State Verification</a></li>
    <li><a href="#stop-the-phala-miner">Stop the Phala miner</a></li>
    <li><a href="#uninstall-the-phala-scripts">Uninstall the Phala scripts</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-34-check-miner-profits" href="https://wiki.phala.network/en-us/docs/poc3/3-4-check-mining-profits/">3.4 Check Miner Profits</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-35-upgrade-miner" href="https://wiki.phala.network/en-us/docs/poc3/3-5-upgrade-miner/">3.5 Upgrade Miner</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#stop-mining">Stop mining</a></li>
    <li><a href="#update-the-phala-miner-and-clean-the-local-files">Update the Phala miner and clean the local files</a></li>
    <li><a href="#update-the-phala-miner-without-clean-the-local-files">Update the Phala miner without clean the local files</a></li>
    <li><a href="#restart-the-phala-miner">Restart the Phala miner</a></li>
    <li><a href="#reset-database-for-troubleshooting-only">Reset database (for troubleshooting only)</a>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-4-frequently-asked-questions" href="https://wiki.phala.network/en-us/docs/poc3/4-faq/">4 Frequently Asked Questions</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
    <li><a href="#i-glossary">I. Glossary</a></li>
    <li><a href="#ii-setting-up-multiple-miners">II. Setting up Multiple Miners</a>
      <ul>
        <li><a href="#q-shall-i-set-up-multiple-full-nodes-as-well-if-i-have-several-miner-workers">Q: Shall I set up multiple full-nodes as well if I have several miner workers?</a></li>
        <li><a href="#q-can-i-use-the-same-ip-address-if-i-have-multiple-computer">Q: Can I use the same IP address if I have multiple computer?</a></li>
        <li><a href="#q-is-a-public-internet-ip-address-necessary-and-will-it-gain-more-points-in-mining">Q: Is a public Internet IP address necessary and will it gain more points in mining?</a></li>
        <li><a href="#q-can-i-use-the-same-phala-account-for-multiple-miners">Q: Can I use the same Phala account for multiple miners?</a></li>
        <li><a href="#q-will-there-be-a-solution-to-registering-multiple-miner-accounts-in-a-short-time">Q: Will there be a solution to registering multiple miner accounts in a short time?</a></li>
      </ul>
    </li>
    <li><a href="#iii-linux-updates--sgx-driver">III. Linux Updates &amp; SGX Driver</a>
      <ul>
        <li><a href="#q-got-error-apt-install---fix-broken">Q: Got error: <code>apt install --fix-broken</code></a></li>
        <li><a href="#q-got-error-need-install-curl-">Q: Got error: <code>need install curl </code></a></li>
        <li><a href="#q-it-got-stuck-after-docker-pull-commands">Q: It got stuck after <code>docker pull...</code> commands</a></li>
      </ul>
    </li>
    <li><a href="#iv-issues-related-to-phala-node-pruntime-phost">IV. Issues related to phala-node, pRuntime, pHost</a>
      <ul>
        <li><a href="#q-got-error-no-such-command-after-i-typed-docker-pull-dockerpkggithubcomphala-networkphala-dockerphala-nodepre-test-4">Q: Got error &quot;no such command&quot; after I typed <code>docker pull docker.pkg.github.com/phala-network/phala-docker/phala-node:pre-test-4</code></a></li>
        <li><a href="#q-got-error-permission-denied">Q: Got error <code>permission denied</code></a></li>
        <li><a href="#q-got-error-docker-error-response-from-darmon-conflict-the-container-name-phala-node-is-already-in-use-by-container">Q: Got error <code>docker: Error response from darmon: Conflict. The container name &quot;/phala-node&quot; is already in use by container</code></a></li>
        <li><a href="#q-got-errors-as-blow">Q: Got errors as blow:</a></li>
        <li><a href="#q-got-error-devsgxenclave-no-such-file-or-directory-or-devisgx-no-such-file-or-directory">Q: Got error: <code>/dev/sgx/enclave No such file or directory</code> or <code>/dev/isgx No such file or directory</code></a></li>
        <li><a href="#q-how-to-check-if-my-installed-driver-is-sgx-or-dcap">Q: How to check if my installed driver is SGX or DCAP?</a></li>
        <li><a href="#q-i-suspect-some-docker-container-dies--hangs--doesnt-run-correctly-but-how-can-i-debug">Q: I suspect some docker container dies / hangs / doesn't run correctly but how can I debug?</a></li>
        <li><a href="#q-how-can-i-dump-the-logs-from-the-containers">Q: How can I dump the logs from the containers?</a></li>
        <li><a href="#q-what-if-my-machine-id-is-empty-after-ive-run-all-the-commands">Q: What if my Machine ID is empty after I've run all the commands?</a></li>
      </ul>
    </li>
    <li><a href="#v-operations-on-chain">V. Operations On-chain</a>
      <ul>
        <li><a href="#q-can-i-bond-the-controller-account-with-multiple-stash-accounts">Q: Can I bond the controller account with multiple stash accounts?</a></li>
        <li><a href="#q-why-my-balance-didnt-change-after-i-have-started-mining">Q: Why my balance didn't change after I have started mining?</a></li>
        <li><a href="#q-got-error-not-controller-while-setting-commission">Q: Got error <code>Not Controller</code> while setting commission</a></li>
      </ul>
    </li>
    <li><a href="#vi-restart-your-phost">VI. Restart your pHost</a>
      <ul>
        <li><a href="#q-got-errblockheadermismatch-after-restarting-phost">Q: Got <code>Err(BlockHeaderMismatch)</code> after restarting phost</a></li>
        <li><a href="#q-is-it-ok-to-use-docker-restart-instead">Q: Is it ok to use <code>docker restart</code> instead?</a></li>
        <li><a href="#q-how-can-i-make-sure-the-restart-is-done">Q: How can I make sure the restart is done?</a></li>
        <li><a href="#q-what-will-happen-if-i-didnt-restart-phost">Q: What will happen if I didn't restart phost?</a></li>
      </ul>
    </li>
    <li><a href="#vii-other">VII. Other</a>
      <ul>
        <li><a href="#q-i-cant-claim-test-tokens-after-clicking-click-to-burn-or-click-to-claim">Q: I can't claim test tokens after clicking <code>Click to burn</code> or <code>Click to claim</code></a></li>
        <li><a href="#q-error-happens-when-i-tried-to-run-the-self-examination-program">Q: Error happens when I tried to run the self-examination program</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-41-error-references" href="https://wiki.phala.network/en-us/docs/poc3/4.1-error-references/">4.1 Error References</a></h3><nav id="TableOfContents"></nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/gatekeeper/" class="group">GateKeeper Guide</a></h2>
      <section class="subsection" id="docs-gatekeeper-guide">
        <h3 class="section_link"><a id="docs-run-a-gatekeeper" href="https://wiki.phala.network/en-us/docs/gatekeeper/run-a-gatekeeper/">Run a Gatekeeper</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#setup-environment">Setup Environment</a></li>
    <li><a href="#synchronize-chain-data">Synchronize Chain Data</a>
      <ul>
        <li><a href="#to-compile-your-gatekeeper-node">*To Compile Your Gatekeeper Node</a></li>
      </ul>
    </li>
    <li><a href="#bond-pha">Bond PHA</a></li>
    <li><a href="#set-session-keys">Set Session Keys</a>
      <ul>
        <li><a href="#generating-the-session-keys">Generating the Session Keys</a>
          <ul>
            <li><a href="#option-1-polkadotjs-apps">Option 1: PolkadotJS-APPS</a></li>
            <li><a href="#option-2-cli">Option 2: CLI</a></li>
          </ul>
        </li>
        <li><a href="#set-your-sessions-keys">Set Your Sessions Keys</a></li>
      </ul>
    </li>
    <li><a href="#pruntime-setup">pRuntime Setup</a></li>
    <li><a href="#phost-setup">pHost Setup</a></li>
    <li><a href="#validate-your-gatekeeper">Validate Your Gatekeeper</a>
      <ul>
        <li><a href="#miner-community">Miner Community</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/pdiem/" class="group">pDiem</a></h2>
      <section class="subsection" id="docs-pdiem">
        <h3 class="section_link"><a id="docs-deploy-local-testnet" href="https://wiki.phala.network/en-us/docs/pdiem/deploy-local-testnet/">Deploy Local Testnet</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#prepare">Prepare</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-play-with-pdiem" href="https://wiki.phala.network/en-us/docs/pdiem/play-with-pdiem/">Play with pDiem</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#create-diem-accounts">Create Diem accounts</a></li>
    <li><a href="#deposit-diem-assets-to-pdiem">Deposit Diem assets to pDiem</a>
      <ul>
        <li><a href="#balances-in-pdiem">Balances in pdiem</a></li>
        <li><a href="#verified-transactions">Verified transactions</a></li>
      </ul>
    </li>
    <li><a href="#withdraw-pdiem-assets-to-diem">Withdraw pDiem assets to Diem</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-reservation-based-model" href="https://wiki.phala.network/en-us/docs/pdiem/reservation-based-model/">Reservation-based Model</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#deposit">Deposit</a></li>
    <li><a href="#transfer">Transfer</a></li>
    <li><a href="#withdraw">Withdraw</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-light-validation-client" href="https://wiki.phala.network/en-us/docs/pdiem/light-validation-client/">Light Validation Client</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#the-basics">The Basics</a></li>
    <li><a href="#light-client">Light Client</a></li>
    <li><a href="#the-diem-blockchain">The Diem Blockchain</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-contract-implementation" href="https://wiki.phala.network/en-us/docs/pdiem/contract-implementation/">Contract Implementation</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#contract-storage">Contract storage</a></li>
    <li><a href="#light-client-implementation">Light client implementation</a></li>
    <li><a href="#receive-deposit-transactions">Receive deposit transactions</a></li>
    <li><a href="#sign-withdraw-transactions">Sign withdraw transactions</a></li>
    <li><a href="#assets-transfer">Assets transfer</a></li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-the-relayer" href="https://wiki.phala.network/en-us/docs/pdiem/the-relayer/">The Relayer</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#who-runs-the-relayer">Who runs the relayer</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-future-works" href="https://wiki.phala.network/en-us/docs/pdiem/future-works/">Future Works</a></h3><nav id="TableOfContents"></nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="https://wiki.phala.network/en-us/docs/poc2/" class="group">Legacy Docs (PoC-2)</a></h2>
      <section class="subsection" id="docs-legacy-docs-poc-2">
        <h3 class="section_link"><a id="docs-run-a-full-node" href="https://wiki.phala.network/en-us/docs/poc2/run-a-full-node/">Run a full node</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#types-of-nodes">Types of Nodes</a></li>
        <li><a href="#fast-install-instructions-linux">Fast Install Instructions (Linux)</a></li>
        <li><a href="#fast-install-instructions-mac">Fast Install Instructions (Mac)</a></li>
      </ul>
    </li>
    <li><a href="#participate-testnet-poc-2-promotion-events">Participate Testnet PoC-2 promotion events</a></li>
    <li><a href="#get-substrate">Get Substrate</a></li>
    <li><a href="#clone-and-build">Clone and Build</a></li>
    <li><a href="#run">Run</a></li>
    <li><a href="#running-an-archive-node">Running an Archive Node</a></li>
    <li><a href="#using-docker">Using Docker</a></li>
  </ul>
</nav>
      </section>
  </section>
      </section>
  </section>
</aside>

  <main class="content">
    <h1>1.2 Hello World: your first confidential contract</h1><blockquote>
<p>Basic understanding of Rust language programming and smart contract development knowledge is necessary to follow this tutorial.</p>
</blockquote>
<h2 id="overview">Overview</h2>
<p>In this tutorial, we are going to continue on the development environment we have set up in the previous chapter, and explore how a confidential smart contract is made. By the end of this tutorial, you will:</p>
<ul>
<li>Learn how to develop a confidential contract</li>
<li>Interact with the contract from the Web UI</li>
<li>Build your own confidential contract</li>
</ul>
<p>For a high-level overview of Phala Network, please check the previous chapters.</p>
<h2 id="environment-and-build">Environment and Build</h2>
<p>Please set up a development environment by following the previous chapter <a href="Run-a-Local-Development-Network">Run a Local Development Network</a>. Make sure you are at the <code>helloworld</code> branch on both <code>phala-blockchain</code> and <code>apps-ng</code> repo.</p>
<h2 id="walk-through">Walk-through</h2>
<h3 id="contract">Contract</h3>
<p>The HelloWorld contract commit is available at <a href="https://github.com/Phala-Network/phala-blockchain/commit/b9c576702ec1b9f0ee4a274b5d7aecc30e40fcb4">here</a>.</p>
<p>HelloWorld contract stores a counter which can be incremented by anyone, but only authorized user can read it. The typical model of the confidential contracts in Phala Network is consisted of the following three components which we will discuss in detail.</p>
<ul>
<li>States</li>
<li>Commands</li>
<li>Queries</li>
</ul>
<p>The <strong>States</strong> of a contract is described by certain variables. In this case, we define a 32-bit unsigned variable as the counter, while you are free to use variables of any types in your contracts.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln">1</span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">HelloWorld</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">2</span><span class="w">    </span><span class="n">counter</span>: <span class="kt">u32</span><span class="p">,</span><span class="w">
</span><span class="ln">3</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p>There are two kinds of operations which can be used to interact with confidential contracts: <strong>Commands</strong> and <strong>Queries</strong>. The most significant difference between them is whether or not they change the states of the contracts, and we explain them separately.</p>
<p>The <strong>Commands</strong> are supposed to change the states of contracts. They are also called <strong>Transactions</strong>, and they are just like the transactions on traditional smart contract blockchains like Ethereum: they must be sent to the blockchain first before their executions. In our HelloWorld contract, we define a <code>Increment</code> command which changes the value of counter.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln">1</span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Command</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">2</span><span class="w">    </span><span class="sd">/// Increments the counter in the contract by some number
</span><span class="ln">3</span><span class="sd"></span><span class="w">    </span><span class="n">Increment</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">4</span><span class="w">        </span><span class="n">value</span>: <span class="kt">u32</span><span class="p">,</span><span class="w">
</span><span class="ln">5</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln">6</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><blockquote>
<p>It is worth noting that you can define more than one commands for a contract. For example, we can add a <code>Decrement</code> command to decrease the counter as follow.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Command</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 2</span><span class="w">    </span><span class="sd">/// Increments the counter in the contract by some number
</span><span class="ln"> 3</span><span class="sd"></span><span class="w">    </span><span class="n">Increment</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 4</span><span class="w">        </span><span class="n">value</span>: <span class="kt">u32</span><span class="p">,</span><span class="w">
</span><span class="ln"> 5</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln"> 6</span><span class="w">    </span><span class="sd">/// Decrements the counter in the contract by some number
</span><span class="ln"> 7</span><span class="sd"></span><span class="w">    </span><span class="n">Decrement</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 8</span><span class="w">        </span><span class="n">value</span>: <span class="kt">u32</span><span class="p">,</span><span class="w">
</span><span class="ln"> 9</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln">10</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div></blockquote>
<p>All the commands are processed by the <code>handle_command</code> method which must be implemented. In this case, we allow any user to use this command, so we just increase the counter without checking the <code>_origin</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="k">fn</span> <span class="nf">handle_command</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">_origin</span>: <span class="kp">&amp;</span><span class="nc">chain</span>::<span class="n">AccountId</span><span class="p">,</span><span class="w"> </span><span class="n">_txref</span>: <span class="kp">&amp;</span><span class="nc">TxRef</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span>: <span class="nc">Command</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">TransactionStatus</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 2</span><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 3</span><span class="w">        </span><span class="c1">// Handle the `Increment` command with one parameter
</span><span class="ln"> 4</span><span class="c1"></span><span class="w">        </span><span class="n">Command</span>::<span class="n">Increment</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 5</span><span class="w">            </span><span class="c1">// Simply increment the counter by some value.
</span><span class="ln"> 6</span><span class="c1"></span><span class="w">            </span><span class="bp">self</span><span class="p">.</span><span class="n">counter</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span><span class="ln"> 7</span><span class="w">            </span><span class="c1">// Returns TransactionStatus::Ok to indicate a successful transaction
</span><span class="ln"> 8</span><span class="c1"></span><span class="w">            </span><span class="n">TransactionStatus</span>::<span class="nb">Ok</span><span class="w">
</span><span class="ln"> 9</span><span class="w">        </span><span class="p">},</span><span class="w">
</span><span class="ln">10</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln">11</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Opposed to commands, <strong>Queries</strong> shall not change the states of contacts. Queries are one of the innovations of Phala Network. They are designed to allow a quick examination of the states of contracts. To define a query, you need to define both the <code>Request</code> and the according <code>Response</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Request</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 2</span><span class="w">    </span><span class="sd">/// Ask for the value of the counter
</span><span class="ln"> 3</span><span class="sd"></span><span class="w">    </span><span class="n">GetCount</span><span class="p">,</span><span class="w">
</span><span class="ln"> 4</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 5</span><span class="w">
</span><span class="ln"> 6</span><span class="w"></span><span class="sd">/// Query responses.
</span><span class="ln"> 7</span><span class="sd"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 8</span><span class="w">    </span><span class="sd">/// Returns the value of the counter
</span><span class="ln"> 9</span><span class="sd"></span><span class="w">    </span><span class="n">GetCount</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">10</span><span class="w">        </span><span class="n">count</span>: <span class="kt">u32</span><span class="p">,</span><span class="w">
</span><span class="ln">11</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln">12</span><span class="w">    </span><span class="sd">/// Something wrong happened
</span><span class="ln">13</span><span class="sd"></span><span class="w">    </span><span class="n">Error</span><span class="p">(</span><span class="n">Error</span><span class="p">)</span><span class="w">
</span><span class="ln">14</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p><code>handle_query</code> method is supposed to handle all the queries. Unlike commands, Queries go directly to the contracts without the necessity to be sent to the blockchain. In confidential contracts queries are usually required to be signed to indicate the identities of the requesters. Therefore queries can be responded conditionally, which gives the developer great flexible control over the data in confidential contracts. The identity of the requester can be accessed from <code>origin</code>, the second argument of <code>handle_query</code>.</p>
<p>We are going to cover more about <code>origin</code> later in this tutorial, but it also supports anonymous queries where <code>origin</code> is <code>None</code> as shown below. The <code>GetCount</code> query simply returns the current value of the counter.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="k">fn</span> <span class="nf">handle_query</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">_origin</span>: <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">chain</span>::<span class="n">AccountId</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">req</span>: <span class="nc">Request</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 2</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="n">Response</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 3</span><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 4</span><span class="w">            </span><span class="c1">// Handle the `GetCount` request.
</span><span class="ln"> 5</span><span class="c1"></span><span class="w">            </span><span class="n">Request</span>::<span class="n">GetCount</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 6</span><span class="w">                </span><span class="c1">// Respond with the counter in the contract states.
</span><span class="ln"> 7</span><span class="c1"></span><span class="w">                </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Response</span>::<span class="n">GetCount</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">count</span>: <span class="nc">self</span><span class="p">.</span><span class="n">counter</span><span class="w"> </span><span class="p">})</span><span class="w">
</span><span class="ln"> 8</span><span class="w">            </span><span class="p">},</span><span class="w">
</span><span class="ln"> 9</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="ln">10</span><span class="w">    </span><span class="p">};</span><span class="w">
</span><span class="ln">11</span><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">inner</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">12</span><span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Response</span>::<span class="n">Error</span><span class="p">(</span><span class="n">error</span><span class="p">),</span><span class="w">
</span><span class="ln">13</span><span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">resp</span><span class="w">
</span><span class="ln">14</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln">15</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><blockquote>
<p>Unlike Ethereum, queries in confidential contracts are capable to carry arbitrary computation. So we recommend to introduce an authority check here to avoid potential Denial-of-Service attack with a huge amount of query requests.</p>
</blockquote>
<h3 id="frontend">Frontend</h3>
<ul>
<li>Web UI commit: <a href="https://github.com/Phala-Network/apps-ng/commit/4a806c8e49edb8f12bd5ed54d1700edf81a6af56">https://github.com/Phala-Network/apps-ng/commit/4a806c8e49edb8f12bd5ed54d1700edf81a6af56</a></li>
</ul>
<p>Interact with the contract: how to send command and queries.</p>
<h2 id="implement-a-secret-notebook">Implement a secret notebook</h2>
<p>After a general understanding of the model of confidential contracts, let's make something practical and implement a contract which can store the secret note of each visitor. In this contract, we allow any user to store one note, and only the user himself is allowed to read his note.</p>
<blockquote>
<p>The SecretNote contract commit is available at <a href="https://github.com/Phala-Network/phala-blockchain/commit/d91f94c9ed21290b7353991899f7a6da18cfab61">https://github.com/Phala-Network/phala-blockchain/commit/d91f94c9ed21290b7353991899f7a6da18cfab61</a> <strong>(CHANGE THIS)</strong>. We thank <a href="https://github.com/LaurentTrk">Laurent</a> for his implementation of this contract.</p>
</blockquote>
<h3 id="contract-1">Contract</h3>
<p>We use a map to store the users with their notes, and provide two interface <code>SetNote</code> and <code>GetNote</code> for them to operate their notes. We frist define the contract state structure <code>struct SecretNote</code>, with a map <code>notes</code> to store a mapping from the account to the notes. In Phala contracts, an account can be represented by an <code>AccountIdWrapper</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln">1</span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">2</span><span class="w">    </span><span class="n">notes</span>: <span class="nc">BTreeMap</span><span class="o">&lt;</span><span class="n">AccountIdWrapper</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span><span class="ln">3</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><blockquote>
<p>In Rust's std collection library, there are two map implementations: <code>HashMap</code> and <code>BTreeMap</code>. Since our <code>AccountIdWrapper</code> does not derive <code>Hash</code> needed by <code>HashMap</code>, we use <code>BTreeMap</code> to store the mapping between user accounts and their notes.</p>
</blockquote>
<p>Here we recall the difference between commands and queries. In SecretNote, <code>SetNote</code> changes the states, so it is a command, and <code>GetNote</code> is a query. For each user, we only keep the latest note. So in <code>SetNote</code>, we call the <code>insert</code> to add a note if no previous one exists or directly overwrite the existing one.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Command</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 2</span><span class="w">    </span><span class="sd">/// Set the note for current user
</span><span class="ln"> 3</span><span class="sd"></span><span class="w">    </span><span class="n">SetNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 4</span><span class="w">        </span><span class="n">note</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="ln"> 5</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln"> 6</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 7</span><span class="w">
</span><span class="ln"> 8</span><span class="w"></span><span class="k">impl</span><span class="w"> </span><span class="n">contracts</span>::<span class="n">Contract</span><span class="o">&lt;</span><span class="n">Command</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p">,</span><span class="w"> </span><span class="n">Response</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 9</span><span class="w">    </span><span class="k">fn</span> <span class="nf">handle_command</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">origin</span>: <span class="kp">&amp;</span><span class="nc">chain</span>::<span class="n">AccountId</span><span class="p">,</span><span class="w"> </span><span class="n">_txref</span>: <span class="kp">&amp;</span><span class="nc">TxRef</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span>: <span class="nc">Command</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">TransactionStatus</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">10</span><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">11</span><span class="w">            </span><span class="c1">// Handle the `SetNote` command with one parameter
</span><span class="ln">12</span><span class="c1"></span><span class="w">            </span><span class="n">Command</span>::<span class="n">SetNote</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">13</span><span class="w">                </span><span class="c1">// Simply increment the counter by some value
</span><span class="ln">14</span><span class="c1"></span><span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">current_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountIdWrapper</span><span class="p">(</span><span class="n">origin</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w">
</span><span class="ln">15</span><span class="w">                </span><span class="c1">// Insert the note, we only keep the latest note
</span><span class="ln">16</span><span class="c1"></span><span class="w">                </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">current_user</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="p">);</span><span class="w">
</span><span class="ln">17</span><span class="w">                </span><span class="c1">// Returns TransactionStatus::Ok to indicate a successful transaction
</span><span class="ln">18</span><span class="c1"></span><span class="w">                </span><span class="n">TransactionStatus</span>::<span class="nb">Ok</span><span class="w">
</span><span class="ln">19</span><span class="w">            </span><span class="p">},</span><span class="w">
</span><span class="ln">20</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="ln">21</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln">22</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Now we can move to the <code>GetNote</code> handler. It's a little tricky since we only allow the owner of the note to access his note. In other words, we need to ensure that the user has signed the query, and then we respond with his note. For a signed query, the <code>origin</code> argument in <code>handle_query</code> method contains the account id of requester.</p>
<p>We implement <code>handle_query</code> as shown below. It first checks if the query is signed by checking <code>origin</code>, and then returns the note stored in the contract states. It returns an <code>NotAuthorized</code> response if the query is not signed.</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln"> 1</span><span class="sd">/// Queries are not supposed to write to the contract states.
</span><span class="ln"> 2</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug, Clone)]</span><span class="w">
</span><span class="ln"> 3</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Request</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 4</span><span class="w">    </span><span class="sd">/// Read the note for current user
</span><span class="ln"> 5</span><span class="sd"></span><span class="w">    </span><span class="n">GetNote</span><span class="p">,</span><span class="w">
</span><span class="ln"> 6</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 7</span><span class="w">
</span><span class="ln"> 8</span><span class="w"></span><span class="sd">/// Query responses.
</span><span class="ln"> 9</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug)]</span><span class="w">
</span><span class="ln">10</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">11</span><span class="w">    </span><span class="sd">/// Return the note for current user
</span><span class="ln">12</span><span class="sd"></span><span class="w">    </span><span class="n">GetNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">13</span><span class="w">        </span><span class="n">note</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="ln">14</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln">15</span><span class="w">    </span><span class="sd">/// Something wrong happened
</span><span class="ln">16</span><span class="sd"></span><span class="w">    </span><span class="n">Error</span><span class="p">(</span><span class="n">Error</span><span class="p">)</span><span class="w">
</span><span class="ln">17</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln">18</span><span class="w">
</span><span class="ln">19</span><span class="w"></span><span class="k">impl</span><span class="w"> </span><span class="n">contracts</span>::<span class="n">Contract</span><span class="o">&lt;</span><span class="n">Command</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p">,</span><span class="w"> </span><span class="n">Response</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">20</span><span class="w">
</span><span class="ln">21</span><span class="w">    </span><span class="k">fn</span> <span class="nf">handle_query</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">origin</span>: <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">chain</span>::<span class="n">AccountId</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">req</span>: <span class="nc">Request</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">22</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="n">Response</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">23</span><span class="w">            </span><span class="k">match</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">24</span><span class="w">                </span><span class="c1">// Handle the `GetNote` request
</span><span class="ln">25</span><span class="c1"></span><span class="w">                </span><span class="n">Request</span>::<span class="n">GetNote</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">26</span><span class="w">                    </span><span class="c1">// Unwrap the current user account
</span><span class="ln">27</span><span class="c1"></span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">account</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">28</span><span class="w">                        </span><span class="kd">let</span><span class="w"> </span><span class="n">current_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountIdWrapper</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w">
</span><span class="ln">29</span><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">contains_key</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">30</span><span class="w">                            </span><span class="c1">// Respond with the note in the notes
</span><span class="ln">31</span><span class="c1"></span><span class="w">                            </span><span class="kd">let</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_user</span><span class="p">);</span><span class="w">
</span><span class="ln">32</span><span class="w">                            </span><span class="k">return</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Response</span>::<span class="n">GetNote</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">note</span>: <span class="nc">note</span><span class="p">.</span><span class="n">unwrap</span><span class="p">().</span><span class="n">clone</span><span class="p">()</span><span class="w"> </span><span class="p">})</span><span class="w">
</span><span class="ln">33</span><span class="w">                        </span><span class="p">}</span><span class="w">
</span><span class="ln">34</span><span class="w">                    </span><span class="p">}</span><span class="w">
</span><span class="ln">35</span><span class="w">
</span><span class="ln">36</span><span class="w">                    </span><span class="c1">// Respond NotAuthorized when no account is specified
</span><span class="ln">37</span><span class="c1"></span><span class="w">                    </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span>::<span class="n">NotAuthorized</span><span class="p">)</span><span class="w">
</span><span class="ln">38</span><span class="w">                </span><span class="p">},</span><span class="w">
</span><span class="ln">39</span><span class="w">            </span><span class="p">}</span><span class="w">
</span><span class="ln">40</span><span class="w">        </span><span class="p">};</span><span class="w">
</span><span class="ln">41</span><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">inner</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">42</span><span class="w">            </span><span class="nb">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Response</span>::<span class="n">Error</span><span class="p">(</span><span class="n">error</span><span class="p">),</span><span class="w">
</span><span class="ln">43</span><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">resp</span><span class="w">
</span><span class="ln">44</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="ln">45</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln">46</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id="frontend-1">Frontend</h3>
<ol>
<li>Set note UI</li>
<li>Query UI</li>
<li>Handle error</li>
</ol>
<h2 id="put-everything-together">Put everything together</h2>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="ln">  1</span><span class="k">use</span><span class="w"> </span><span class="n">serde</span>::<span class="p">{</span><span class="n">Serialize</span><span class="p">,</span><span class="w"> </span><span class="n">Deserialize</span><span class="p">};</span><span class="w">
</span><span class="ln">  2</span><span class="w">
</span><span class="ln">  3</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">contracts</span><span class="p">;</span><span class="w">
</span><span class="ln">  4</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">types</span>::<span class="n">TxRef</span><span class="p">;</span><span class="w">
</span><span class="ln">  5</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">TransactionStatus</span><span class="p">;</span><span class="w">
</span><span class="ln">  6</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">contracts</span>::<span class="n">AccountIdWrapper</span><span class="p">;</span><span class="w">
</span><span class="ln">  7</span><span class="w">
</span><span class="ln">  8</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">std</span>::<span class="n">collections</span>::<span class="n">BTreeMap</span><span class="p">;</span><span class="w">
</span><span class="ln">  9</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="k">crate</span>::<span class="n">std</span>::<span class="n">string</span>::<span class="nb">String</span><span class="p">;</span><span class="w">
</span><span class="ln"> 10</span><span class="w">
</span><span class="ln"> 11</span><span class="w"></span><span class="sd">/// SecretNote contract states.
</span><span class="ln"> 12</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug, Default)]</span><span class="w">
</span><span class="ln"> 13</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 14</span><span class="w">    </span><span class="n">notes</span>: <span class="nc">BTreeMap</span><span class="o">&lt;</span><span class="n">AccountIdWrapper</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w">
</span><span class="ln"> 15</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 16</span><span class="w">
</span><span class="ln"> 17</span><span class="w"></span><span class="sd">/// The commands that the contract accepts from the blockchain. Also called transactions.
</span><span class="ln"> 18</span><span class="sd">/// Commands are supposed to update the states of the contract.
</span><span class="ln"> 19</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug)]</span><span class="w">
</span><span class="ln"> 20</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Command</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 21</span><span class="w">    </span><span class="sd">/// Set the note for current user
</span><span class="ln"> 22</span><span class="sd"></span><span class="w">    </span><span class="n">SetNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 23</span><span class="w">        </span><span class="n">note</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="ln"> 24</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln"> 25</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 26</span><span class="w">
</span><span class="ln"> 27</span><span class="w"></span><span class="sd">/// The errors that the contract could throw for some queries
</span><span class="ln"> 28</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug)]</span><span class="w">
</span><span class="ln"> 29</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 30</span><span class="w">    </span><span class="n">NotAuthorized</span><span class="p">,</span><span class="w">
</span><span class="ln"> 31</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 32</span><span class="w">
</span><span class="ln"> 33</span><span class="w"></span><span class="sd">/// Query requests. The end users can only query the contract states by sending requests.
</span><span class="ln"> 34</span><span class="sd">/// Queries are not supposed to write to the contract states.
</span><span class="ln"> 35</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug, Clone)]</span><span class="w">
</span><span class="ln"> 36</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Request</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 37</span><span class="w">    </span><span class="sd">/// Read the note for current user
</span><span class="ln"> 38</span><span class="sd"></span><span class="w">    </span><span class="n">GetNote</span><span class="p">,</span><span class="w">
</span><span class="ln"> 39</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 40</span><span class="w">
</span><span class="ln"> 41</span><span class="w"></span><span class="sd">/// Query responses.
</span><span class="ln"> 42</span><span class="sd"></span><span class="cp">#[derive(Serialize, Deserialize, Debug)]</span><span class="w">
</span><span class="ln"> 43</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 44</span><span class="w">    </span><span class="sd">/// Return the note for current user
</span><span class="ln"> 45</span><span class="sd"></span><span class="w">    </span><span class="n">GetNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 46</span><span class="w">        </span><span class="n">note</span>: <span class="nb">String</span><span class="p">,</span><span class="w">
</span><span class="ln"> 47</span><span class="w">    </span><span class="p">},</span><span class="w">
</span><span class="ln"> 48</span><span class="w">    </span><span class="sd">/// Something wrong happened
</span><span class="ln"> 49</span><span class="sd"></span><span class="w">    </span><span class="n">Error</span><span class="p">(</span><span class="n">Error</span><span class="p">)</span><span class="w">
</span><span class="ln"> 50</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 51</span><span class="w">
</span><span class="ln"> 52</span><span class="w">
</span><span class="ln"> 53</span><span class="w"></span><span class="k">impl</span><span class="w"> </span><span class="n">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 54</span><span class="w">    </span><span class="sd">/// Initializes the contract
</span><span class="ln"> 55</span><span class="sd"></span><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">new</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 56</span><span class="w">        </span><span class="nb">Default</span>::<span class="n">default</span><span class="p">()</span><span class="w">
</span><span class="ln"> 57</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln"> 58</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="ln"> 59</span><span class="w">
</span><span class="ln"> 60</span><span class="w"></span><span class="k">impl</span><span class="w"> </span><span class="n">contracts</span>::<span class="n">Contract</span><span class="o">&lt;</span><span class="n">Command</span><span class="p">,</span><span class="w"> </span><span class="n">Request</span><span class="p">,</span><span class="w"> </span><span class="n">Response</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SecretNote</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 61</span><span class="w">    </span><span class="c1">// Returns the contract id
</span><span class="ln"> 62</span><span class="c1"></span><span class="w">    </span><span class="k">fn</span> <span class="nf">id</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">contracts</span>::<span class="n">ContractId</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">contracts</span>::<span class="n">SECRET_NOTE</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="ln"> 63</span><span class="w">
</span><span class="ln"> 64</span><span class="w">    </span><span class="c1">// Handles the commands from transactions on the blockchain. This method doesn&#39;t respond.
</span><span class="ln"> 65</span><span class="c1"></span><span class="w">    </span><span class="k">fn</span> <span class="nf">handle_command</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">origin</span>: <span class="kp">&amp;</span><span class="nc">chain</span>::<span class="n">AccountId</span><span class="p">,</span><span class="w"> </span><span class="n">_txref</span>: <span class="kp">&amp;</span><span class="nc">TxRef</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span>: <span class="nc">Command</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">TransactionStatus</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 66</span><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 67</span><span class="w">            </span><span class="c1">// Handle the `SetNote` command with one parameter
</span><span class="ln"> 68</span><span class="c1"></span><span class="w">            </span><span class="n">Command</span>::<span class="n">SetNote</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 69</span><span class="w">                </span><span class="c1">// Simply increment the counter by some value
</span><span class="ln"> 70</span><span class="c1"></span><span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">current_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountIdWrapper</span><span class="p">(</span><span class="n">origin</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w">
</span><span class="ln"> 71</span><span class="w">                </span><span class="c1">// Insert the note, we only keep the latest note
</span><span class="ln"> 72</span><span class="c1"></span><span class="w">                </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">current_user</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="p">);</span><span class="w">
</span><span class="ln"> 73</span><span class="w">                </span><span class="c1">// Returns TransactionStatus::Ok to indicate a successful transaction
</span><span class="ln"> 74</span><span class="c1"></span><span class="w">                </span><span class="n">TransactionStatus</span>::<span class="nb">Ok</span><span class="w">
</span><span class="ln"> 75</span><span class="w">            </span><span class="p">},</span><span class="w">
</span><span class="ln"> 76</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="ln"> 77</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln"> 78</span><span class="w">
</span><span class="ln"> 79</span><span class="w">    </span><span class="c1">// Handles a direct query and responds to the query. It shouldn&#39;t modify the contract states.
</span><span class="ln"> 80</span><span class="c1"></span><span class="w">    </span><span class="k">fn</span> <span class="nf">handle_query</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">origin</span>: <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="n">chain</span>::<span class="n">AccountId</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">req</span>: <span class="nc">Request</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 81</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="n">Response</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 82</span><span class="w">            </span><span class="k">match</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 83</span><span class="w">                </span><span class="c1">// Handle the `GetNote` request
</span><span class="ln"> 84</span><span class="c1"></span><span class="w">                </span><span class="n">Request</span>::<span class="n">GetNote</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 85</span><span class="w">                    </span><span class="c1">// Unwrap the current user account
</span><span class="ln"> 86</span><span class="c1"></span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">account</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 87</span><span class="w">                        </span><span class="kd">let</span><span class="w"> </span><span class="n">current_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AccountIdWrapper</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w">
</span><span class="ln"> 88</span><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">contains_key</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln"> 89</span><span class="w">                            </span><span class="c1">// Respond with the note in the notes
</span><span class="ln"> 90</span><span class="c1"></span><span class="w">                            </span><span class="kd">let</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">notes</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_user</span><span class="p">);</span><span class="w">
</span><span class="ln"> 91</span><span class="w">                            </span><span class="k">return</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Response</span>::<span class="n">GetNote</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">note</span>: <span class="nc">note</span><span class="p">.</span><span class="n">unwrap</span><span class="p">().</span><span class="n">clone</span><span class="p">()</span><span class="w"> </span><span class="p">})</span><span class="w">
</span><span class="ln"> 92</span><span class="w">                        </span><span class="p">}</span><span class="w">
</span><span class="ln"> 93</span><span class="w">                    </span><span class="p">}</span><span class="w">
</span><span class="ln"> 94</span><span class="w">
</span><span class="ln"> 95</span><span class="w">                    </span><span class="c1">// Respond NotAuthorized when no account is specified
</span><span class="ln"> 96</span><span class="c1"></span><span class="w">                    </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span>::<span class="n">NotAuthorized</span><span class="p">)</span><span class="w">
</span><span class="ln"> 97</span><span class="w">                </span><span class="p">},</span><span class="w">
</span><span class="ln"> 98</span><span class="w">            </span><span class="p">}</span><span class="w">
</span><span class="ln"> 99</span><span class="w">        </span><span class="p">};</span><span class="w">
</span><span class="ln">100</span><span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">inner</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="ln">101</span><span class="w">            </span><span class="nb">Err</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Response</span>::<span class="n">Error</span><span class="p">(</span><span class="n">error</span><span class="p">),</span><span class="w">
</span><span class="ln">102</span><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">resp</span><span class="w">
</span><span class="ln">103</span><span class="w">        </span><span class="p">}</span><span class="w">
</span><span class="ln">104</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="ln">105</span><span class="w"></span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="summary">Summary</h2>
<p>In this tutorial, we have covered a walk-through for the <code>HelloWorld</code> contract template, and demostrate how we can build a bit more advanced contract <code>SecretNote</code> that leverages the confidentiality of Phala contract. Now it's your turn to build something new!</p>
<h3 id="submit-your-work">Submit your work</h3>
<p>This tutorial is a part of <a href="https://gitcoin.co/hackathon/polkadot/onboard">Polkadot &quot;Hello World&quot; virtual hackathon challenge</a> at gitcoin.co. In order to win the task, please do the followings:</p>
<ol>
<li>Fork <a href="https://github.com/Phala-Network/phala-blockchain/tree/helloworld">the core blockchain</a> and <a href="https://github.com/Phala-Network/apps-ng/tree/helloworld">the Web UI</a> repo (helloworld branch) into your own GitHub account</li>
<li>Develop your own contract on the templates at “helloworld” branch (must be a different one from existing submissions)</li>
<li>Launch your full development stack and take screenshots of your dapps</li>
<li>Push your work to your forked repos. They must be open source</li>
<li>Make a tweet with the link to your repos, the screenshots, and describe what you are building on Twitter</li>
<li>Join our <a href="https://discord.gg/zQKNGv4">Discord server</a> and submit the the link to your tweet</li>
</ol>

    <div class="pager">
  
  <div class="pager_item prev">
    
    <a href="https://wiki.phala.network/en-us/docs/poc3/1-2-bind-stash-and-controller-accounts/" class="pager_link button" title="1.2 Bind Stash and Controller accounts">
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
      <span class="pager_label">1.2 Bind Stash and Controller accounts</span>
    </a>
  </div>
  

  
  <div class="pager_item next">
    
    <a href="https://wiki.phala.network/en-us/docs/poc3/1-3-check-your-hardware-bios-and-system/" class="pager_link button" title="1.3 Check your hardware, BIOS and system">
      <span class="pager_label">1.3 Check your hardware, BIOS and system</span>
      <img class="pager_link_next light" src="https://wiki.phala.network/images/next.svg">
      <img class="pager_link_next dark" src="https://wiki.phala.network/images/next-dark.svg">
    </a>
  </div>
  
</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 401.998 401.998" id="sort">
    <path d="M73.092 164.452h255.813c4.949 0 9.233-1.807 12.848-5.424 3.613-3.616 5.427-7.898 5.427-12.847s-1.813-9.229-5.427-12.85L213.846 5.424C210.232 1.812 205.951 0 200.999 0s-9.233 1.812-12.85 5.424L60.242 133.331c-3.617 3.617-5.424 7.901-5.424 12.85 0 4.948 1.807 9.231 5.424 12.847 3.621 3.617 7.902 5.424 12.85 5.424zm255.813 73.097H73.092c-4.952 0-9.233 1.808-12.85 5.421-3.617 3.617-5.424 7.898-5.424 12.847s1.807 9.233 5.424 12.848L188.149 396.57c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428l127.907-127.906c3.613-3.614 5.427-7.898 5.427-12.848 0-4.948-1.813-9.229-5.427-12.847-3.614-3.616-7.899-5.42-12.848-5.42z"></path>
  </symbol>
</svg>

<svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube">
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
</svg>

  </main>
</div>

  </div>
<footer class="pt-2 pb-2">
  <div class="wrap">
    <p>&copy; <span class="year">2021</span></p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 401.998 401.998" id="sort">
    <path d="M73.092 164.452h255.813c4.949 0 9.233-1.807 12.848-5.424 3.613-3.616 5.427-7.898 5.427-12.847s-1.813-9.229-5.427-12.85L213.846 5.424C210.232 1.812 205.951 0 200.999 0s-9.233 1.812-12.85 5.424L60.242 133.331c-3.617 3.617-5.424 7.901-5.424 12.85 0 4.948 1.807 9.231 5.424 12.847 3.621 3.617 7.902 5.424 12.85 5.424zm255.813 73.097H73.092c-4.952 0-9.233 1.808-12.85 5.421-3.617 3.617-5.424 7.898-5.424 12.847s1.807 9.233 5.424 12.848L188.149 396.57c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428l127.907-127.906c3.613-3.614 5.427-7.898 5.427-12.848 0-4.948-1.813-9.229-5.427-12.847-3.614-3.616-7.899-5.42-12.848-5.42z"></path>
  </symbol>
</svg>

<svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube">
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
</svg>

<script src="https://wiki.phala.network/js/bundle.min.ff2af2b02cda8c10a3c000abaddf6495f5de9e097c4305d94d77eaf30b472f1332958cf308695a20408e459815f3641bb83ca163fea06b3d4468c3de30dfb189.js"></script>

</body>
</html>
